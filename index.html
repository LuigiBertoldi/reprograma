<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reprograma 30 ‚Äî M√©todo Anti-V√≠cio</title>
  <meta name="description" content="Reprograma 30: m√©todo anti-v√≠cio com trilhas para apostas, √°lcool, cigarro, pornografia e drogas. Modo crise, check-in e progresso vis√≠vel." />
  <meta name="theme-color" content="#0a0f1d" />

  <style>
    :root{
      --bg:#0a0f1d;
      --bg2:#0f162c;
      --panel:rgba(255,255,255,.04);
      --panel2:rgba(255,255,255,.03);
      --line:rgba(255,255,255,.09);
      --line2:rgba(255,255,255,.16);
      --text:#eef4ff;
      --muted:#a9b6d3;

      --violet:#8a5bff;
      --cyan:#33d6ff;
      --pink:#ff5cd6;

      --good:#38d487;
      --warn:#ffd06b;
      --bad:#ff6b86;

      --shadow:0 24px 70px rgba(0,0,0,.45);
      --shadow-soft:0 12px 30px rgba(0,0,0,.22);

      --r-sm:14px;
      --r:20px;
      --r-lg:28px;
      --max:1160px;
      --nav-h:74px;
    }

    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    html{scroll-behavior:smooth}
    body{
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(900px 650px at 8% -10%, rgba(138,91,255,.18), transparent 60%),
        radial-gradient(800px 600px at 100% 0%, rgba(51,214,255,.14), transparent 60%),
        linear-gradient(180deg, #090e1b, #0a1020 55%, #0d1528);
      min-height:100vh;
      overflow-x:hidden;
    }

    a{color:inherit;text-decoration:none}
    button,input,select{font:inherit}
    .wrap{max-width:var(--max);margin:0 auto;padding:0 20px}
    .hidden{display:none!important}
    .muted{color:var(--muted)}
    .small{font-size:12px;line-height:1.6;color:var(--muted)}
    .danger{color:#ffd6de}

    /* NAV */
    .nav{
      position:sticky; top:0; z-index:60;
      height:var(--nav-h);
      backdrop-filter: blur(10px);
      background:rgba(10,15,29,.75);
      border-bottom:1px solid var(--line);
    }
    .nav-inner{
      height:100%;
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }

    .brand{
      display:flex; align-items:center; gap:12px;
      cursor:pointer;
      min-width:220px;
    }
    .brand-mark{
      width:42px; height:42px; border-radius:14px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.02);
      box-shadow:0 12px 30px rgba(138,91,255,.14);
      display:grid; place-items:center;
      overflow:hidden;
      flex:0 0 auto;
    }
    .brand-title{
      font-weight:900; font-size:15px; line-height:1;
      letter-spacing:.1px;
    }
    .brand-title .n{
      background:linear-gradient(135deg,var(--violet),var(--cyan));
      -webkit-background-clip:text; background-clip:text; color:transparent;
    }
    .brand-sub{
      margin-top:4px;
      font-size:11px; color:var(--muted);
    }

    .nav-links{
      display:flex; align-items:center; gap:8px; flex-wrap:wrap;
    }
    .nav-links a{
      font-size:13px;
      color:var(--muted);
      border:1px solid transparent;
      padding:8px 10px;
      border-radius:999px;
      transition:.16s ease;
    }
    .nav-links a:hover{
      color:var(--text);
      background:rgba(255,255,255,.03);
      border-color:var(--line);
    }
    .nav-actions{
      display:flex; align-items:center; gap:10px;
      flex:0 0 auto;
    }

    /* BUTTONS */
    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:8px;
      padding:11px 14px;
      border-radius:999px;
      border:1px solid transparent;
      font-weight:800;
      font-size:14px;
      cursor:pointer;
      transition:.15s ease;
      white-space:nowrap;
      user-select:none;
    }
    .btn:hover{transform:translateY(-1px)}
    .btn:active{transform:translateY(0)}
    .btn-sm{padding:9px 12px;font-size:13px}
    .btn-block{width:100%}
    .btn-primary{
      color:#06111d;
      background:linear-gradient(135deg,var(--violet),var(--cyan));
      box-shadow:0 12px 30px rgba(51,214,255,.14),0 12px 30px rgba(138,91,255,.18);
    }
    .btn-ghost{
      color:var(--text);
      background:rgba(255,255,255,.02);
      border-color:var(--line);
    }
    .btn-soft{
      color:var(--text);
      background:rgba(255,255,255,.05);
      border-color:rgba(255,255,255,.11);
    }

    /* SECTION */
    section{padding:34px 0}
    .section-head{
      display:flex; justify-content:space-between; align-items:flex-end; gap:16px;
      margin-bottom:14px;
    }
    .section-head h2{
      margin:0;
      font-size:24px;
      letter-spacing:-.35px;
    }
    .section-head p{
      margin:0;
      color:var(--muted);
      font-size:13px;
      line-height:1.6;
      max-width:700px;
      text-align:right;
    }

    /* HERO */
    header{padding:34px 0 8px}
    .hero{
      position:relative;
      overflow:hidden;
      border-radius:var(--r-lg);
      border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(255,255,255,.045), rgba(255,255,255,.022));
      box-shadow:var(--shadow);
      padding:26px;
      isolation:isolate;
    }
    .hero::before{
      content:"";
      position:absolute;
      width:390px; height:390px; border-radius:50%;
      right:-140px; top:-160px;
      background:radial-gradient(circle, rgba(51,214,255,.22), transparent 62%);
      filter:blur(10px);
      z-index:-1;
    }
    .hero::after{
      content:"";
      position:absolute;
      width:460px; height:460px; border-radius:50%;
      left:-180px; bottom:-250px;
      background:radial-gradient(circle, rgba(138,91,255,.20), rgba(255,92,214,.08), transparent 64%);
      filter:blur(12px);
      z-index:-1;
    }

    .hero-grid{
      display:grid;
      grid-template-columns:1.08fr .92fr;
      gap:20px;
      align-items:start;
    }
    .hero-kicker{
      display:flex; flex-wrap:wrap; gap:8px;
      margin-bottom:12px;
    }
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.02);
      color:var(--muted);
      font-size:12px;
    }
    .dot{
      width:8px; height:8px; border-radius:50%;
      background:var(--good);
      box-shadow:0 0 0 4px rgba(56,212,135,.12);
    }

    .hero h1{
      margin:0 0 10px;
      font-size:44px;
      line-height:1.03;
      letter-spacing:-1px;
      max-width:14ch;
    }
    .lead{
      margin:0;
      color:var(--muted);
      font-size:15px;
      line-height:1.7;
      max-width:64ch;
    }
    .hero-cta{
      display:flex; gap:10px; flex-wrap:wrap;
      margin-top:16px;
    }

    .hero-list{
      display:grid; gap:10px;
      margin-top:16px;
    }
    .hero-list .item{
      display:flex; gap:10px; align-items:flex-start;
      border:1px solid var(--line);
      background:rgba(255,255,255,.02);
      border-radius:15px;
      padding:10px 12px;
    }
    .spark{
      width:10px; height:10px; border-radius:50%;
      margin-top:5px; flex:0 0 auto;
      background:linear-gradient(135deg,var(--pink),var(--violet),var(--cyan));
      box-shadow:0 0 0 5px rgba(138,91,255,.12);
    }
    .hero-list b{font-size:13px}
    .hero-list span{display:block;color:var(--muted);font-size:12px;line-height:1.5}

    .hero-side{
      display:grid; gap:10px;
    }
    .mini-card{
      border:1px solid var(--line);
      background:rgba(255,255,255,.02);
      border-radius:18px;
      padding:14px;
      box-shadow:var(--shadow-soft);
    }
    .mini-card h3{
      margin:0 0 8px;
      font-size:14px;
      letter-spacing:-.2px;
    }
    .mini-card p{
      margin:0;
      color:var(--muted);
      font-size:13px;
      line-height:1.6;
    }

    .disclaimer{
      margin-top:14px;
      border-top:1px solid var(--line);
      padding-top:12px;
      font-size:12px;
      line-height:1.6;
      color:#ffdbe2;
    }

    /* GRID / CARD */
    .grid{display:grid; gap:12px}
    .grid-2{grid-template-columns:repeat(2,minmax(0,1fr))}
    .grid-3{grid-template-columns:repeat(3,minmax(0,1fr))}

    .card{
      border:1px solid var(--line);
      background:var(--panel2);
      border-radius:var(--r);
      padding:16px;
      box-shadow:var(--shadow-soft);
    }
    .card h3{
      margin:0 0 8px;
      font-size:15px;
      letter-spacing:-.15px;
    }
    .card p{
      margin:0;
      color:var(--muted);
      font-size:13px;
      line-height:1.62;
    }

    .divider{
      height:1px; background:var(--line);
      margin:12px 0;
    }

    .badge{
      display:inline-block;
      border-radius:999px;
      padding:6px 9px;
      margin:3px 6px 0 0;
      font-size:11px;
      border:1px solid var(--line);
      color:var(--muted);
      background:rgba(255,255,255,.02);
    }
    .badge.good{border-color:rgba(56,212,135,.28); color:#baf5d6; background:rgba(56,212,135,.08)}
    .badge.warn{border-color:rgba(255,208,107,.28); color:#ffe6b0; background:rgba(255,208,107,.08)}
    .badge.bad{border-color:rgba(255,107,134,.28); color:#ffd3dc; background:rgba(255,107,134,.08)}

    /* CHOICE CARD */
    .choice{
      display:flex; justify-content:space-between; align-items:flex-start; gap:12px;
      cursor:pointer;
      transition:.16s ease;
    }
    .choice:hover{
      transform:translateY(-2px);
      border-color:rgba(51,214,255,.25);
      background:rgba(255,255,255,.045);
    }
    .choice-right{
      min-width:56px;
      display:flex; justify-content:center; align-items:center;
    }

    /* VALUE LIST */
    .feature-list{
      list-style:none;
      padding:0; margin:0;
      display:grid; gap:10px;
    }
    .feature-list li{
      display:flex; gap:10px; align-items:flex-start;
      color:var(--muted);
      font-size:13px;
      line-height:1.5;
    }
    .check{
      width:18px; height:18px; border-radius:7px;
      border:1px solid rgba(56,212,135,.28);
      background:rgba(56,212,135,.10);
      color:var(--good);
      display:grid; place-items:center;
      font-weight:900;
      flex:0 0 auto;
      margin-top:1px;
    }

    /* PRICING */
    .pricing{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:12px;
    }
    .price{
      position:relative;
      overflow:hidden;
    }
    .price.best{
      border-color:rgba(51,214,255,.25);
      background:linear-gradient(180deg, rgba(51,214,255,.05), rgba(255,255,255,.03));
    }
    .ribbon{
      position:absolute; top:10px; right:10px;
      padding:6px 8px;
      border-radius:999px;
      font-size:10px; font-weight:900;
      color:#06101c;
      background:linear-gradient(135deg,var(--violet),var(--cyan));
    }
    .money{
      margin:8px 0 2px;
      font-size:34px;
      line-height:1;
      font-weight:900;
      letter-spacing:-.8px;
    }
    .money small{
      color:var(--muted);
      font-size:13px;
      font-weight:700;
    }

    /* FAQ */
    .faq-list{display:grid; gap:10px}
    .faq-item{
      border:1px solid var(--line);
      border-radius:16px;
      background:rgba(255,255,255,.022);
      overflow:hidden;
    }
    .faq-btn{
      width:100%;
      background:transparent;
      border:none;
      color:var(--text);
      padding:14px 16px;
      display:flex; justify-content:space-between; align-items:center; gap:12px;
      text-align:left;
      cursor:pointer;
      font-size:14px;
      font-weight:800;
    }
    .faq-btn:hover{background:rgba(255,255,255,.02)}
    .faq-icon{
      width:28px; height:28px; border-radius:10px;
      border:1px solid var(--line);
      color:var(--muted);
      display:grid; place-items:center;
      flex:0 0 auto;
      font-weight:900;
    }
    .faq-panel{
      display:none;
      padding:0 16px 14px;
      color:var(--muted);
      font-size:13px;
      line-height:1.6;
    }
    .faq-item.open .faq-panel{display:block}
    .faq-item.open .faq-icon{color:var(--text)}

    /* TRILHA */
    .two-col{
      display:grid;
      grid-template-columns:1.15fr .85fr;
      gap:12px;
      align-items:start;
    }
    .kpi{
      border:1px solid var(--line);
      border-radius:16px;
      background:rgba(255,255,255,.02);
      padding:12px;
      display:flex; justify-content:space-between; gap:10px;
    }
    .kpi span{font-size:12px;color:var(--muted)}
    .kpi b{font-size:18px;letter-spacing:-.3px}
    .progress{
      margin-top:8px;
      height:10px; border-radius:999px;
      overflow:hidden;
      background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.04);
    }
    .progress > div{
      height:100%; width:0%;
      background:linear-gradient(90deg,var(--violet),var(--cyan));
    }

    .field-label{
      display:block;
      font-size:12px;
      color:var(--muted);
      margin-bottom:6px;
    }
    .field{
      width:100%;
      border-radius:12px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.02);
      color:var(--text);
      padding:11px 12px;
      outline:none;
    }
    .field:focus{
      border-color:rgba(51,214,255,.28);
      box-shadow:0 0 0 4px rgba(51,214,255,.08);
    }
    select.field option{
      background:#121b30;
      color:#eef4ff;
    }
    input[type="range"]{width:100%}
    .btn-row{display:flex; gap:8px; flex-wrap:wrap}

    /* MODAL CRISE */
    .overlay{
      position:fixed; inset:0;
      background:rgba(0,0,0,.58);
      backdrop-filter:blur(8px);
      z-index:100;
      display:none;
    }
    .modal{
      position:fixed;
      left:50%; top:50%;
      transform:translate(-50%,-50%);
      width:min(780px, calc(100% - 24px));
      border-radius:22px;
      border:1px solid var(--line2);
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      box-shadow:0 30px 100px rgba(0,0,0,.55);
      z-index:101;
      overflow:hidden;
      display:none;
    }
    .modal-head{
      padding:14px;
      border-bottom:1px solid var(--line);
      display:flex; justify-content:space-between; align-items:flex-start; gap:12px;
    }
    .modal-head h3{margin:0;font-size:16px}
    .modal-head p{margin:6px 0 0;color:var(--muted);font-size:13px;line-height:1.55}
    .icon-btn{
      width:38px; height:38px;
      border-radius:12px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.02);
      color:var(--text);
      display:grid; place-items:center;
      cursor:pointer;
      flex:0 0 auto;
    }
    .modal-body{padding:14px}
    .modal-grid{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
    }
    .modal-card{
      border:1px solid var(--line);
      background:rgba(255,255,255,.02);
      border-radius:16px;
      padding:14px;
    }
    .modal-card h4{margin:0 0 8px;font-size:14px}
    .modal-card p{margin:0;color:var(--muted);font-size:13px;line-height:1.55}

    .breath-wrap{
      display:flex; gap:12px; align-items:center;
      margin-top:10px;
    }
    .breath-ball{
      width:84px; height:84px; border-radius:24px;
      border:1px solid var(--line);
      background:
        radial-gradient(circle at 30% 30%, rgba(51,214,255,.22), transparent 65%),
        radial-gradient(circle at 70% 70%, rgba(138,91,255,.18), transparent 65%),
        rgba(255,255,255,.02);
      box-shadow:0 8px 30px rgba(51,214,255,.08);
      transform:scale(.94);
      flex:0 0 auto;
    }
    .breathing{animation:breathe 6s ease-in-out infinite}
    @keyframes breathe{
      0%{transform:scale(.92)}
      50%{transform:scale(1.08)}
      100%{transform:scale(.92)}
    }
    .timer b{display:block;font-size:20px;letter-spacing:-.5px}
    .timer span{font-size:12px;color:var(--muted)}
    .modal-note{
      margin-top:10px;
      font-size:12px; line-height:1.55;
      color:var(--muted);
    }

    /* TOAST */
    .toast{
      position:fixed;
      left:50%; bottom:16px;
      transform:translateX(-50%);
      padding:10px 12px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.62);
      backdrop-filter:blur(8px);
      color:var(--text);
      font-size:13px;
      z-index:120;
      display:none;
    }

    /* FOOTER */
    footer{
      margin-top:24px;
      border-top:1px solid var(--line);
      padding:22px 0 38px;
    }

    /* RESPONSIVO */
    @media (max-width: 980px){
      .nav-links{display:none}
      .brand{min-width:auto}
      .hero-grid{grid-template-columns:1fr}
      .hero h1{font-size:34px;max-width:none}
      .grid-3,.grid-2,.pricing,.two-col,.modal-grid{grid-template-columns:1fr}
      .section-head{flex-direction:column;align-items:flex-start}
      .section-head p{text-align:left}
    }
  </style>
</head>
<body>

  <!-- NAV -->
  <div class="nav">
    <div class="wrap nav-inner">
      <div class="brand" id="goHome" aria-label="Ir para a p√°gina inicial">
        <div class="brand-mark" aria-hidden="true">
          <!-- logo clean (sem personagem) -->
          <svg viewBox="0 0 64 64" width="28" height="28">
            <defs>
              <linearGradient id="logoG" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0" stop-color="#ff5cd6"/>
                <stop offset=".55" stop-color="#8a5bff"/>
                <stop offset="1" stop-color="#33d6ff"/>
              </linearGradient>
            </defs>
            <path d="M18 35c-4-3-6-7-6-13 0-9 6-16 15-16 3 0 6 1 8 3 2-2 5-3 8-3 9 0 15 7 15 16 0 6-2 10-6 13-1 1-2 3-2 5 0 5-3 8-8 8-2 0-4-1-6-3-2 2-4 3-6 3-5 0-8-3-8-8 0-2-1-4-2-5Z" fill="url(#logoG)" opacity=".95"/>
            <path d="M18 31h28" stroke="white" stroke-opacity=".82" stroke-width="4.8" stroke-linecap="round"/>
            <path d="M21 24h22" stroke="white" stroke-opacity=".18" stroke-width="4.8" stroke-linecap="round"/>
            <path d="M22 38h20" stroke="white" stroke-opacity=".18" stroke-width="4.8" stroke-linecap="round"/>
          </svg>
        </div>
        <div>
          <div class="brand-title">Reprograma <span class="n">30</span></div>
          <div class="brand-sub" id="navSubtitle">M√©todo Anti-V√≠cio ‚Ä¢ Um dia por vez</div>
        </div>
      </div>

      <div class="nav-links" id="navLinksHome">
        <a href="#metodo">M√©todo</a>
        <a href="#identificar">Trilhas</a>
        <a href="#valor">Plataforma</a>
        <a href="#planos">Planos</a>
        <a href="#faq">FAQ</a>
      </div>

      <div class="nav-links hidden" id="navLinksTrilha">
        <a href="#trilha">Trilha</a>
        <a href="#checkin">Check-in</a>
        <a href="#planos">Assinar</a>
      </div>

      <div class="nav-actions">
        <button class="btn btn-ghost btn-sm" id="btnCrisisTop" type="button">Modo crise</button>
        <button class="btn btn-primary btn-sm" id="btnPrimaryTop" type="button">Come√ßar</button>
      </div>
    </div>
  </div>

  <!-- HOME -->
  <main id="viewHome">
    <header>
      <div class="wrap">
        <div class="hero">
          <div class="hero-grid">
            <div>
              <div class="hero-kicker">
                <span class="pill"><span class="dot"></span>Sem julgamento</span>
                <span class="pill">Privacidade</span>
                <span class="pill">Um dia por vez</span>
              </div>

              <h1>Voc√™ n√£o √© fraco. Voc√™ est√° preso em um ciclo.</h1>

              <p class="lead">
                O <b>Reprograma 30</b> √© um m√©todo pr√°tico de reestrutura√ß√£o comportamental para pessoas que querem retomar o controle de v√≠cios e compuls√µes.
                Sem julgamento. Com passos claros. Um dia por vez.
              </p>

              <div class="hero-cta">
                <button class="btn btn-primary" id="btnStartIdentify" type="button">Quero me identificar e come√ßar</button>
                <a class="btn btn-ghost" href="#metodo">Entender como funciona</a>
                <button class="btn btn-soft" id="btnCrisisHero" type="button">Abrir modo crise</button>
              </div>

              <div class="hero-list">
                <div class="item">
                  <span class="spark"></span>
                  <div><b>Trilhas espec√≠ficas por v√≠cio</b><span>Apostas ‚Ä¢ √Ålcool ‚Ä¢ Cigarro ‚Ä¢ Pornografia ‚Ä¢ Drogas</span></div>
                </div>
                <div class="item">
                  <span class="spark"></span>
                  <div><b>Estrutura pr√°tica de 30 dias</b><span>Passos objetivos e aplic√°veis no dia a dia</span></div>
                </div>
                <div class="item">
                  <span class="spark"></span>
                  <div><b>Modo crise + check-in</b><span>Ferramenta para o momento cr√≠tico e progresso vis√≠vel</span></div>
                </div>
              </div>

              <div class="disclaimer">
                Conte√∫do educacional/comportamental. N√£o substitui acompanhamento m√©dico, psicol√≥gico ou psiqui√°trico.
                Em situa√ß√µes de risco, procure ajuda profissional imediatamente (CVV 188 / Emerg√™ncia 192).
              </div>
            </div>

            <div class="hero-side">
              <div class="mini-card">
                <h3>O que a pessoa encontra ao entrar</h3>
                <p>Trilha por v√≠cio, plano de 30 dias, modo crise, check-in di√°rio e recompensas visuais para manter consist√™ncia.</p>
              </div>

              <div class="mini-card">
                <h3>Compromisso com responsabilidade</h3>
                <p>O Reprograma 30 n√£o promete milagre. A proposta √© oferecer estrutura, clareza e apoio pr√°tico para recupera√ß√£o de controle.</p>
              </div>

              <div class="mini-card">
                <h3>Motiva√ß√£o oscila. Estrutura permanece.</h3>
                <p>Muita reca√≠da acontece em momentos de cansa√ßo, ansiedade, solid√£o e gatilho. O m√©todo foi pensado para funcionar justamente a√≠.</p>
              </div>

              <div class="mini-card">
                <h3>Links de divulga√ß√£o por trilha</h3>
                <p>Voc√™ pode divulgar links diretos como <b>#apostas</b>, <b>#alcool</b>, <b>#fumar</b>, <b>#pornografia</b> e <b>#drogas</b>.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <section id="identificar">
      <div class="wrap">
        <div class="section-head">
          <h2>Qual dessas situa√ß√µes mais parece com voc√™ hoje?</h2>
          <p>Escolha a trilha que mais representa seu momento. Voc√™ pode come√ßar por uma e trocar depois.</p>
        </div>

        <div class="grid grid-3">
          <div class="card choice" data-v="apostas" tabindex="0" role="button">
            <div>
              <h3>üéØ Apostas</h3>
              <p>Perda de dinheiro, ansiedade, ‚Äús√≥ mais uma‚Äù, tentativa de recuperar preju√≠zo, culpa e impulso no celular.</p>
              <div class="divider"></div>
              <span class="badge bad">urg√™ncia</span>
              <span class="badge warn">impulso</span>
              <span class="badge warn">gatilho digital</span>
            </div>
            <div class="choice-right"><span class="badge good">Abrir</span></div>
          </div>

          <div class="card choice" data-v="alcool" tabindex="0" role="button">
            <div>
              <h3>üç∫ √Ålcool</h3>
              <p>Uso por estresse, rotina social, fim de semana, reca√≠das e dificuldade de manter consist√™ncia.</p>
              <div class="divider"></div>
              <span class="badge warn">social</span>
              <span class="badge warn">rotina</span>
            </div>
            <div class="choice-right"><span class="badge good">Abrir</span></div>
          </div>

          <div class="card choice" data-v="fumar" tabindex="0" role="button">
            <div>
              <h3>üö¨ Cigarro</h3>
              <p>H√°bito autom√°tico, ansiedade, ‚Äúpausas‚Äù durante o dia, gatilhos fixos e depend√™ncia de rotina.</p>
              <div class="divider"></div>
              <span class="badge warn">h√°bito</span>
              <span class="badge warn">ansiedade</span>
            </div>
            <div class="choice-right"><span class="badge good">Abrir</span></div>
          </div>

          <div class="card choice" data-v="pornografia" tabindex="0" role="button">
            <div>
              <h3>üß† Pornografia</h3>
              <p>Compuls√£o, escapismo, culpa, gatilhos digitais, perda de foco e sensa√ß√£o de descontrole.</p>
              <div class="divider"></div>
              <span class="badge warn">gatilho digital</span>
              <span class="badge warn">isolamento</span>
            </div>
            <div class="choice-right"><span class="badge good">Abrir</span></div>
          </div>

          <div class="card choice" data-v="drogas" tabindex="0" role="button">
            <div>
              <h3>‚ö†Ô∏è Drogas</h3>
              <p>Gatilhos sociais, ambiente, fuga emocional, reca√≠das e necessidade de estrutura e prote√ß√£o.</p>
              <div class="divider"></div>
              <span class="badge bad">aten√ß√£o</span>
              <span class="badge warn">apoio</span>
            </div>
            <div class="choice-right"><span class="badge good">Abrir</span></div>
          </div>

          <div class="card">
            <h3>‚ùì N√£o sei por onde come√ßar</h3>
            <p>Comece pelo que mais est√° te prejudicando hoje. O mais importante √© come√ßar.</p>
            <div class="divider"></div>
            <button class="btn btn-primary btn-block" id="btnStartAny" type="button">Come√ßar agora</button>
          </div>
        </div>
      </div>
    </section>

    <section id="metodo">
      <div class="wrap">
        <div class="section-head">
          <h2>Como o Reprograma 30 funciona</h2>
          <p>Uma l√≥gica simples, pr√°tica e repet√≠vel para sair do autom√°tico e recuperar o controle.</p>
        </div>

        <div class="grid grid-3">
          <div class="card">
            <h3>1) Consci√™ncia</h3>
            <p>Entender gatilhos, hor√°rios, emo√ß√µes e padr√µes que alimentam o ciclo.</p>
          </div>
          <div class="card">
            <h3>2) Interrup√ß√£o</h3>
            <p>Aplicar barreiras, a√ß√µes r√°pidas e estrat√©gias para atravessar o momento de impulso.</p>
          </div>
          <div class="card">
            <h3>3) Reconstru√ß√£o</h3>
            <p>Substituir o h√°bito por rotinas e a√ß√µes funcionais que refor√ßam comportamento saud√°vel.</p>
          </div>
        </div>

        <div class="grid grid-2" style="margin-top:12px">
          <div class="card">
            <h3>4) Consolida√ß√£o</h3>
            <p>Manter progresso, prevenir reca√≠das e construir continuidade com uma estrutura sustent√°vel.</p>
          </div>
          <div class="card">
            <h3>O ponto principal</h3>
            <p><b>A diferen√ßa n√£o est√° em ‚Äúquerer mais‚Äù. Est√° em ter estrutura quando a vontade falha.</b></p>
          </div>
        </div>
      </div>
    </section>

    <section id="valor">
      <div class="wrap">
        <div class="section-head">
          <h2>O que voc√™ encontra dentro da plataforma</h2>
          <p>Tudo foi pensado para ser simples de usar, pr√°tico no dia a dia e aplic√°vel at√© nos momentos mais dif√≠ceis.</p>
        </div>

        <div class="grid grid-2">
          <div class="card">
            <h3>Recursos inclusos</h3>
            <ul class="feature-list" style="margin-top:2px">
              <li><span class="check">‚úì</span><span>Trilhas organizadas por tipo de v√≠cio</span></li>
              <li><span class="check">‚úì</span><span>Estrutura de 30 dias com passos pr√°ticos</span></li>
              <li><span class="check">‚úì</span><span>Modo Crise para momentos de impulso</span></li>
              <li><span class="check">‚úì</span><span>Check-in di√°rio com progresso vis√≠vel</span></li>
              <li><span class="check">‚úì</span><span>Recompensas visuais (badges, certificado e relat√≥rio)</span></li>
              <li><span class="check">‚úì</span><span>Conte√∫do direto, sem julgamento e sem enrola√ß√£o</span></li>
            </ul>
          </div>

          <div class="card">
            <h3>Para quem √© o Reprograma 30</h3>
            <ul class="feature-list" style="margin-top:2px">
              <li><span class="check">‚úì</span><span>Para quem quer retomar o controle de compuls√µes e v√≠cios</span></li>
              <li><span class="check">‚úì</span><span>Para quem j√° tentou parar sozinho e voltou ao mesmo ciclo</span></li>
              <li><span class="check">‚úì</span><span>Para quem precisa de estrutura pr√°tica no dia a dia</span></li>
              <li><span class="check">‚úì</span><span>Para quem quer come√ßar agora, sem esperar ‚Äúmotiva√ß√£o perfeita‚Äù</span></li>
            </ul>

            <div class="divider"></div>
            <p class="small danger">
              N√£o substitui tratamento m√©dico/psiqui√°trico. Em casos graves, o ideal √© usar junto com acompanhamento profissional.
            </p>
          </div>
        </div>

        <div class="card" style="margin-top:12px">
          <h3>O que pode mudar quando voc√™ aplica com consist√™ncia</h3>
          <p>
            Mais consci√™ncia dos gatilhos, menos impulsividade no momento cr√≠tico, mais sensa√ß√£o de controle, melhora na rotina/foco/energia e redu√ß√£o de reca√≠das.
            <b>O objetivo n√£o √© perfei√ß√£o. √â recupera√ß√£o de controle.</b>
          </p>
        </div>
      </div>
    </section>

    <section id="planos">
      <div class="wrap">
        <div class="section-head">
          <h2>Escolha seu plano de acesso</h2>
          <p>Comece agora e tenha acesso √†s trilhas, ferramentas e estrutura do m√©todo.</p>
        </div>

        <div class="pricing">
          <div class="card price">
            <h3>Mensal</h3>
            <div class="money">R$ 29 <small>/ m√™s</small></div>
            <p class="small">Ideal para come√ßar agora e testar a plataforma com acesso completo.</p>

            <ul class="feature-list" style="margin-top:12px">
              <li><span class="check">‚úì</span><span>Acesso √†s trilhas</span></li>
              <li><span class="check">‚úì</span><span>Estrutura de 30 dias</span></li>
              <li><span class="check">‚úì</span><span>Modo crise + check-in + progresso</span></li>
            </ul>

            <div style="margin-top:14px">
              <a class="btn btn-primary btn-block" href="https://pay.kiwify.com.br/RrMdJme" target="_blank" rel="noopener">Assinar mensal</a>
            </div>
          </div>

          <div class="card price best">
            <span class="ribbon">MAIS VENDIDO</span>
            <h3>Trimestral</h3>
            <div class="money">R$ 69 <small>/ 3 meses</small></div>
            <p class="small">Melhor custo-benef√≠cio para quem quer tempo suficiente para consolidar resultados.</p>

            <ul class="feature-list" style="margin-top:12px">
              <li><span class="check">‚úì</span><span>Melhor valor por per√≠odo</span></li>
              <li><span class="check">‚úì</span><span>Mais tempo para consist√™ncia</span></li>
              <li><span class="check">‚úì</span><span>Continuidade e preven√ß√£o de reca√≠da</span></li>
            </ul>

            <div style="margin-top:14px">
              <a class="btn btn-primary btn-block" href="https://pay.kiwify.com.br/Kgog3p3" target="_blank" rel="noopener">Assinar trimestral</a>
            </div>
          </div>
        </div>

        <p class="small" style="margin-top:12px">Pagamento processado pela Kiwify.</p>
      </div>
    </section>

    <section id="faq">
      <div class="wrap">
        <div class="section-head">
          <h2>Perguntas frequentes</h2>
          <p>Respostas objetivas para transmitir confian√ßa e reduzir d√∫vidas antes da assinatura.</p>
        </div>

        <div class="faq-list" id="faqList">
          <div class="faq-item">
            <button class="faq-btn" type="button" aria-expanded="false">
              <span>1. Isso substitui terapia ou tratamento?</span>
              <span class="faq-icon">+</span>
            </button>
            <div class="faq-panel">
              N√£o. O Reprograma 30 √© um suporte educacional/comportamental. Em casos moderados ou graves, o ideal √© usar junto com acompanhamento profissional.
            </div>
          </div>

          <div class="faq-item">
            <button class="faq-btn" type="button" aria-expanded="false">
              <span>2. Se eu recair, significa que falhei?</span>
              <span class="faq-icon">+</span>
            </button>
            <div class="faq-panel">
              N√£o. Reca√≠da n√£o apaga o progresso. O m√©todo trabalha retomada, identifica√ß√£o de gatilhos e continuidade.
            </div>
          </div>

          <div class="faq-item">
            <button class="faq-btn" type="button" aria-expanded="false">
              <span>3. Posso trocar de trilha depois?</span>
              <span class="faq-icon">+</span>
            </button>
            <div class="faq-panel">
              Sim. Voc√™ pode come√ßar pela trilha mais urgente e mudar depois conforme sua necessidade.
            </div>
          </div>

          <div class="faq-item">
            <button class="faq-btn" type="button" aria-expanded="false">
              <span>4. Quanto tempo por dia eu preciso?</span>
              <span class="faq-icon">+</span>
            </button>
            <div class="faq-panel">
              Em m√©dia, de 8 a 12 minutos por dia para aplicar o b√°sico da estrutura.
            </div>
          </div>

          <div class="faq-item">
            <button class="faq-btn" type="button" aria-expanded="false">
              <span>5. Como funcionam as recompensas sem custo?</span>
              <span class="faq-icon">+</span>
            </button>
            <div class="faq-panel">
              As recompensas visuais (badges, certificado e relat√≥rio) s√£o geradas localmente no navegador, sem custo extra.
            </div>
          </div>

          <div class="faq-item">
            <button class="faq-btn" type="button" aria-expanded="false">
              <span>6. Posso usar de forma discreta?</span>
              <span class="faq-icon">+</span>
            </button>
            <div class="faq-panel">
              Sim. O objetivo √© oferecer um ambiente sem julgamento, com foco em apoio e aplica√ß√£o pr√°tica.
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer>
      <div class="wrap">
        <p class="small">
          <b>Reprograma 30</b> √© suporte educacional/comportamental. N√£o substitui tratamento profissional.
          Em risco imediato: CVV 188 / Emerg√™ncia 192.
        </p>
        <p class="small">¬© <span id="yearHome"></span> Reprograma 30.</p>
      </div>
    </footer>
  </main>

  <!-- TRILHA VIEW -->
  <main id="viewTrilha" class="hidden">
    <header>
      <div class="wrap">
        <div class="hero">
          <div class="hero-kicker">
            <span class="pill"><span class="dot"></span><span id="pillType">Trilha</span></span>
            <span class="pill">8‚Äì12 min/dia</span>
            <span class="pill">Progresso vis√≠vel</span>
          </div>

          <h1 id="trTitle">Trilha</h1>
          <p class="lead" id="trDesc">...</p>

          <div class="hero-cta">
            <button class="btn btn-primary" id="btnDay1" type="button">Come√ßar Dia 1</button>
            <button class="btn btn-ghost" id="btnCrisisTrilha" type="button">Modo crise</button>
            <a class="btn btn-soft" href="#planos">Ver planos</a>
          </div>

          <div class="disclaimer">
            Suporte educacional/comportamental. N√£o substitui tratamento profissional.
            Em situa√ß√£o de risco, procure ajuda profissional imediatamente.
          </div>
        </div>
      </div>
    </header>

    <section id="trilha">
      <div class="wrap">
        <div class="section-head">
          <h2>Estrutura da trilha (30 dias)</h2>
          <p>Mesma l√≥gica do m√©todo ‚Äî mudam os gatilhos, exemplos e a√ß√µes pr√°ticas de cada caso.</p>
        </div>

        <div class="grid grid-2">
          <div class="card">
            <h3>Fase 1 ‚Äî Consci√™ncia (1‚Äì7)</h3>
            <p id="p1">...</p>
          </div>
          <div class="card">
            <h3>Fase 2 ‚Äî Interrup√ß√£o (8‚Äì14)</h3>
            <p id="p2">...</p>
          </div>
          <div class="card">
            <h3>Fase 3 ‚Äî Reconstru√ß√£o (15‚Äì21)</h3>
            <p id="p3">...</p>
          </div>
          <div class="card">
            <h3>Fase 4 ‚Äî Consolida√ß√£o (22‚Äì30)</h3>
            <p id="p4">...</p>
          </div>
        </div>

        <div class="card" style="margin-top:12px">
          <h3>O que pode mudar em 7 dias</h3>
          <p id="in7">...</p>
          <div class="divider"></div>
          <h3>O que pode mudar em 30 dias</h3>
          <p id="in30">...</p>
        </div>
      </div>
    </section>

    <section id="checkin">
      <div class="wrap">
        <div class="section-head">
          <h2>Check-in di√°rio (demo local)</h2>
          <p>Salvo no navegador. Zero custo. Progresso vis√≠vel para refor√ßar consist√™ncia.</p>
        </div>

        <div class="two-col">
          <div class="card">
            <h3>Seu progresso</h3>
            <div class="divider"></div>

            <div class="kpi">
              <div><span>Streak</span><br><b id="streak">0</b></div>
              <div style="text-align:right"><span>√öltimo check-in</span><br><b id="last">‚Äî</b></div>
            </div>
            <div class="progress"><div id="progBar"></div></div>

            <div class="divider"></div>

            <label class="field-label" for="ciDid">Hoje eu‚Ä¶</label>
            <select class="field" id="ciDid">
              <option value="ok">N√£o ca√≠</option>
              <option value="slip">Quase ca√≠</option>
              <option value="relapse">Ca√≠</option>
            </select>

            <div class="divider"></div>

            <label class="field-label" for="ciUrge">Vontade (0 a 5)</label>
            <input id="ciUrge" type="range" min="0" max="5" value="2">

            <div class="divider"></div>

            <label class="field-label" for="ciTrig">Gatilho principal</label>
            <select class="field" id="ciTrig">
              <option>T√©dio</option>
              <option>Ansiedade/Estresse</option>
              <option>Tristeza/Solid√£o</option>
              <option>Ambiente/Social</option>
              <option>Celular/Feed</option>
            </select>

            <div class="btn-row" style="margin-top:12px">
              <button class="btn btn-primary" id="btnCheckin" type="button">Salvar check-in</button>
              <button class="btn btn-ghost" id="btnReset" type="button">Zerar</button>
            </div>

            <div class="btn-row" style="margin-top:10px">
              <button class="btn btn-ghost" id="btnBadges" type="button">Badges</button>
              <button class="btn btn-ghost" id="btnCert" type="button">Certificado</button>
              <button class="btn btn-ghost" id="btnReport" type="button">Relat√≥rio</button>
            </div>
          </div>

          <div class="card">
            <h3>Recompensas (zero custo)</h3>
            <p class="small">Progresso vis√≠vel mant√©m voc√™ no processo. O foco √© refor√ßar consist√™ncia, n√£o perfei√ß√£o.</p>

            <div class="divider"></div>
            <p class="small" id="rewardText">Fa√ßa 7 dias seguidos sem cair e desbloqueie certificado + badge.</p>

            <div class="divider"></div>
            <h3>Assinar acesso completo</h3>
            <p class="small">Para liberar conte√∫do completo das trilhas e continuidade de 90 dias.</p>

            <div class="btn-row" style="margin-top:10px">
              <a class="btn btn-primary btn-block" href="https://pay.kiwify.com.br/RrMdJme" target="_blank" rel="noopener">Assinar mensal</a>
              <a class="btn btn-soft btn-block" href="https://pay.kiwify.com.br/Kgog3p3" target="_blank" rel="noopener">Assinar trimestral</a>
            </div>

            <div class="divider"></div>
            <p class="small">Dica: voc√™ pode divulgar link direto da trilha (ex.: <b>seusite.com/#apostas</b>).</p>
          </div>
        </div>
      </div>
    </section>

    <section id="planos">
      <div class="wrap">
        <div class="section-head">
          <h2>Escolha seu plano de acesso</h2>
          <p>Mensal ou trimestral. Mesmos links Kiwify.</p>
        </div>

        <div class="pricing">
          <div class="card price">
            <h3>Mensal</h3>
            <div class="money">R$ 29 <small>/ m√™s</small></div>
            <ul class="feature-list" style="margin-top:12px">
              <li><span class="check">‚úì</span><span>Todas as trilhas</span></li>
              <li><span class="check">‚úì</span><span>Conte√∫do completo 30 dias</span></li>
              <li><span class="check">‚úì</span><span>Modo crise e progresso</span></li>
            </ul>
            <div style="margin-top:14px">
              <a class="btn btn-primary btn-block" href="https://pay.kiwify.com.br/RrMdJme" target="_blank" rel="noopener">Assinar mensal</a>
            </div>
          </div>

          <div class="card price best">
            <span class="ribbon">MAIS VENDIDO</span>
            <h3>Trimestral</h3>
            <div class="money">R$ 69 <small>/ 3 meses</small></div>
            <ul class="feature-list" style="margin-top:12px">
              <li><span class="check">‚úì</span><span>Melhor custo/benef√≠cio</span></li>
              <li><span class="check">‚úì</span><span>90 dias para consolidar</span></li>
              <li><span class="check">‚úì</span><span>Mais continuidade</span></li>
            </ul>
            <div style="margin-top:14px">
              <a class="btn btn-primary btn-block" href="https://pay.kiwify.com.br/Kgog3p3" target="_blank" rel="noopener">Assinar trimestral</a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer>
      <div class="wrap">
        <p class="small">
          <b>Reprograma 30</b> √© suporte educacional/comportamental. N√£o substitui tratamento profissional.
        </p>
        <p class="small">¬© <span id="yearTrilha"></span> Reprograma 30.</p>
      </div>
    </footer>
  </main>

  <!-- MODAL CRISE -->
  <div class="overlay" id="overlay"></div>
  <div class="modal" id="crisisModal" role="dialog" aria-modal="true" aria-labelledby="crisisTitle">
    <div class="modal-head">
      <div>
        <h3 id="crisisTitle">Modo Crise</h3>
        <p>Seu objetivo agora n√£o √© resolver a vida toda. √â atravessar este momento sem cair no impulso.</p>
      </div>
      <button class="icon-btn" id="btnCloseModal" type="button" aria-label="Fechar">‚úï</button>
    </div>

    <div class="modal-body">
      <div class="modal-grid">
        <div class="modal-card">
          <h4>Respira√ß√£o guiada (2 minutos)</h4>
          <p>Inspire 4s ‚Ä¢ segure 2s ‚Ä¢ solte 6s. Reduzir a urg√™ncia fisiol√≥gica ajuda voc√™ a recuperar controle.</p>

          <div class="breath-wrap">
            <div class="breath-ball" id="breathBall" aria-hidden="true"></div>
            <div class="timer">
              <b id="breathTimer">02:00</b>
              <span id="breathHint">Pronto para iniciar.</span>
            </div>
          </div>

          <div class="btn-row" style="margin-top:12px">
            <button class="btn btn-primary" id="btnBreathStart" type="button">Iniciar</button>
            <button class="btn btn-ghost" id="btnBreathStop" type="button">Parar</button>
          </div>
        </div>

        <div class="modal-card">
          <h4>A√ß√µes r√°pidas (30‚Äì60 segundos)</h4>
          <p>Escolha uma a√ß√£o agora. Mudar corpo e ambiente reduz impulso.</p>

          <div class="btn-row" style="margin-top:10px">
            <button class="btn btn-ghost" id="btnActionWater" type="button">Beber √°gua</button>
            <button class="btn btn-ghost" id="btnActionMove" type="button">Mover o corpo</button>
            <button class="btn btn-ghost" id="btnActionCut" type="button">Cortar gatilho</button>
            <button class="btn btn-soft" id="btnActionCheckin" type="button">Ir para check-in</button>
          </div>

          <div class="modal-note">
            Se houver risco √† sua seguran√ßa, procure ajuda profissional imediatamente (CVV 188 / Emerg√™ncia 192).
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- TOAST -->
  <div class="toast" id="toast"></div>

  <script>
    // Helpers
    const $ = (id) => document.getElementById(id);

    function toast(msg){
      const t = $("toast");
      t.textContent = msg;
      t.style.display = "block";
      clearTimeout(window.__toastTimer);
      window.__toastTimer = setTimeout(() => t.style.display = "none", 2600);
    }

    $("yearHome").textContent = new Date().getFullYear();
    $("yearTrilha").textContent = new Date().getFullYear();

    // Views
    const viewHome = $("viewHome");
    const viewTrilha = $("viewTrilha");
    const navLinksHome = $("navLinksHome");
    const navLinksTrilha = $("navLinksTrilha");
    const navSubtitle = $("navSubtitle");
    const btnPrimaryTop = $("btnPrimaryTop");

    function showHome(push = true){
      viewHome.classList.remove("hidden");
      viewTrilha.classList.add("hidden");

      navLinksHome.classList.remove("hidden");
      navLinksTrilha.classList.add("hidden");

      navSubtitle.textContent = "M√©todo Anti-V√≠cio ‚Ä¢ Um dia por vez";
      btnPrimaryTop.textContent = "Come√ßar";
      btnPrimaryTop.onclick = null;

      if(push) history.pushState({view:"home"}, "", "#");
      window.scrollTo({top:0, behavior:"smooth"});
    }

    function showTrilha(v, push = true){
      const d = DATA[v] || DATA.apostas;

      viewHome.classList.add("hidden");
      viewTrilha.classList.remove("hidden");

      navLinksHome.classList.add("hidden");
      navLinksTrilha.classList.remove("hidden");

      navSubtitle.textContent = d.pill;
      btnPrimaryTop.textContent = "Assinar";
      btnPrimaryTop.onclick = () => document.getElementById("planos").scrollIntoView({behavior:"smooth", block:"start"});

      applyTrilha(v);

      if(push) history.pushState({view:"trilha", v}, "", "#" + v);
      window.scrollTo({top:0, behavior:"smooth"});
    }

    $("goHome").addEventListener("click", () => showHome(true));

    btnPrimaryTop.addEventListener("click", () => {
      if(!viewHome.classList.contains("hidden")){
        document.getElementById("identificar").scrollIntoView({behavior:"smooth", block:"start"});
      } else {
        document.getElementById("planos").scrollIntoView({behavior:"smooth", block:"start"});
      }
    });

    $("btnStartIdentify").addEventListener("click", () => {
      document.getElementById("identificar").scrollIntoView({behavior:"smooth", block:"start"});
    });
    $("btnStartAny").addEventListener("click", () => showTrilha("apostas", true));

    // FAQ accordion (abre 1 por vez)
    (function initFAQ(){
      const root = $("faqList");
      if(!root) return;
      const items = Array.from(root.querySelectorAll(".faq-item"));

      items.forEach(item => {
        const btn = item.querySelector(".faq-btn");
        const icon = item.querySelector(".faq-icon");

        btn.addEventListener("click", () => {
          const isOpen = item.classList.contains("open");

          items.forEach(i => {
            i.classList.remove("open");
            i.querySelector(".faq-btn").setAttribute("aria-expanded", "false");
            i.querySelector(".faq-icon").textContent = "+";
          });

          if(!isOpen){
            item.classList.add("open");
            btn.setAttribute("aria-expanded", "true");
            icon.textContent = "‚Äì";
          }
        });
      });
    })();

    // Conte√∫do das trilhas
    const DATA = {
      apostas:{
        pill:"Trilha ‚Ä¢ Apostas",
        title:"Apostas: recuperar controle e quebrar o ciclo do ‚Äús√≥ mais uma‚Äù",
        desc:"Voc√™ vai reduzir gatilhos digitais, organizar o momento cr√≠tico e reconstruir controle emocional e financeiro ‚Äî um dia por vez.",
        p1:"Diagn√≥stico real de perdas e padr√µes, entendimento do ciclo do quase-ganho e mapeamento de gatilhos (t√©dio, ansiedade, celular e hor√°rios).",
        p2:"Bloqueio de apps/sites, limpeza de feed, regra das 24h para decis√µes impulsivas e t√©cnica de adiamento da vontade.",
        p3:"Reorganiza√ß√£o da rotina, redirecionamento de dopamina e refor√ßo de controle financeiro e emocional.",
        p4:"Plano anti-reca√≠da, continuidade de 90 dias e fortalecimento da identidade de quem retoma o controle.",
        in7:"Mais clareza sobre gatilhos, menos impulsividade autom√°tica e mais controle nos momentos de risco.",
        in30:"Mais organiza√ß√£o, menos reca√≠das, mais controle emocional e financeiro, e rotina mais est√°vel.",
        day1Title:"Dia 1 ‚Äî Diagn√≥stico real (Apostas)",
        day1Text:"Escreva quanto perdeu, quando costuma apostar, quais emo√ß√µes aparecem antes, quais gatilhos digitais ativam a vontade e qual o custo invis√≠vel disso na sua vida. Clareza corta o autom√°tico."
      },
      alcool:{
        pill:"Trilha ‚Ä¢ √Ålcool",
        title:"√Ålcool: sair do ‚Äús√≥ hoje‚Äù e quebrar o padr√£o de fim de semana",
        desc:"Voc√™ vai mapear gatilhos sociais, criar alternativas reais e organizar uma rotina que sustente consist√™ncia.",
        p1:"Mapear quando, com quem e por que bebe, identificar emo√ß√µes antes do uso e entender padr√£o de reca√≠da em finais de semana e eventos.",
        p2:"Estrat√©gias para situa√ß√µes sociais, regras de prote√ß√£o pessoal, alternativas em encontros e plano r√°pido para gatilho social.",
        p3:"Rotina de energia e descanso, redu√ß√£o de estresse com a√ß√µes pr√°ticas e refor√ßo de autocontrole.",
        p4:"Preven√ß√£o de reca√≠da em datas/eventos, continuidade e plano de retomada se houver queda.",
        in7:"Mais consci√™ncia de onde voc√™ escorrega e um plano melhor para lidar com situa√ß√µes sociais.",
        in30:"Mais consist√™ncia, melhor energia e mais controle sobre os gatilhos de fim de semana.",
        day1Title:"Dia 1 ‚Äî Mapa do padr√£o (√Ålcool)",
        day1Text:"Escreva quando voc√™ bebe, com quem, o que sente antes e o que acontece depois. Identifique 3 gatilhos e defina 1 mudan√ßa de ambiente para esta semana."
      },
      fumar:{
        pill:"Trilha ‚Ä¢ Cigarro",
        title:"Cigarro: quebrar o autom√°tico e substituir a ‚Äúpausa‚Äù",
        desc:"Voc√™ vai identificar gatilhos fixos, trocar pausas autom√°ticas e criar um plano simples para ansiedade e rotina.",
        p1:"Mapear momentos autom√°ticos (caf√©, estresse, p√≥s-refei√ß√£o), entender a fun√ß√£o do cigarro na rotina e identificar gatilhos fixos.",
        p2:"Troca de pausa por micro-a√ß√µes funcionais, regra de atraso da vontade e redu√ß√£o de acessibilidade.",
        p3:"Rotina curta para ansiedade, pausas conscientes e continuidade em hor√°rios cr√≠ticos.",
        p4:"Preven√ß√£o de reca√≠das, estrat√©gias para dias dif√≠ceis e manuten√ß√£o do padr√£o novo.",
        in7:"Menos autom√°tico e mais consci√™ncia das pausas e gatilhos do dia.",
        in30:"Mais controle sobre a rotina e redu√ß√£o do padr√£o autom√°tico de fumar.",
        day1Title:"Dia 1 ‚Äî Gatilhos fixos (Cigarro)",
        day1Text:"Liste 5 momentos do dia em que o cigarro aparece no autom√°tico. Para cada um, escreva uma alternativa de 2 minutos."
      },
      pornografia:{
        pill:"Trilha ‚Ä¢ Pornografia",
        title:"Pornografia: quebrar compuls√£o e reduzir gatilhos digitais",
        desc:"Voc√™ vai reduzir exposi√ß√£o, criar barreiras no ambiente digital e reconstruir rotina, foco e energia.",
        p1:"Mapear hor√°rios cr√≠ticos (principalmente √† noite), identificar emo√ß√µes antes do impulso e entender o ciclo culpa ‚Üí repeti√ß√£o.",
        p2:"Higiene digital, barreiras pr√°ticas, redu√ß√£o de est√≠mulos, regra de atraso do impulso e protocolo de crise.",
        p3:"Substitui√ß√£o de h√°bito, rotina de foco/energia e organiza√ß√£o de ambiente.",
        p4:"Preven√ß√£o de reca√≠da, continuidade de 90 dias e fortalecimento de rotina.",
        in7:"Menos gatilhos digitais e mais controle sobre o hor√°rio cr√≠tico.",
        in30:"Mais foco, energia e rotina; menos compuls√£o e mais clareza para manter progresso.",
        day1Title:"Dia 1 ‚Äî Padr√£o e gatilhos (Pornografia)",
        day1Text:"Escreva o hor√°rio cr√≠tico, a emo√ß√£o que aparece antes e o contexto. Remova hoje 1 gatilho digital (app, conta, hist√≥rico ou acesso f√°cil)."
      },
      drogas:{
        pill:"Trilha ‚Ä¢ Drogas",
        title:"Drogas: reduzir risco, reorganizar ambiente e construir consist√™ncia",
        desc:"Foco em ambiente, exposi√ß√£o, rotina e prote√ß√£o. Em casos graves, o ideal √© usar junto com apoio profissional.",
        p1:"Mapear ambientes, pessoas e situa√ß√µes de risco, identificar gatilhos emocionais e entender o ciclo emo√ß√£o ‚Üí uso ‚Üí consequ√™ncia.",
        p2:"Plano de prote√ß√£o pessoal, redu√ß√£o de exposi√ß√£o, estrat√©gia de sa√≠da de situa√ß√µes de risco e protocolo para impulso.",
        p3:"Organiza√ß√£o de rotina, a√ß√µes substitutas e responsabilidade com check-in.",
        p4:"Preven√ß√£o de reca√≠da, continuidade, refor√ßo de prote√ß√£o ambiental e ajustes de rotina.",
        in7:"Mais clareza sobre ambientes de risco e a√ß√µes de prote√ß√£o imediata.",
        in30:"Mais estabilidade, menos exposi√ß√£o e mais chance de manter o controle com consist√™ncia.",
        day1Title:"Dia 1 ‚Äî Ambiente e risco (Drogas)",
        day1Text:"Liste 3 ambientes/pessoas de risco e 3 a√ß√µes de prote√ß√£o. Se houver risco √† sua seguran√ßa, procure ajuda profissional imediatamente."
      }
    };

    let currentV = "apostas";

    function applyTrilha(v){
      currentV = v;
      const d = DATA[v] || DATA.apostas;

      $("pillType").textContent = d.pill;
      $("trTitle").textContent = d.title;
      $("trDesc").textContent = d.desc;
      $("p1").textContent = d.p1;
      $("p2").textContent = d.p2;
      $("p3").textContent = d.p3;
      $("p4").textContent = d.p4;
      $("in7").textContent = d.in7;
      $("in30").textContent = d.in30;

      localStorage.setItem("rp30_selected", v);
      updateCheckinUI();
    }

    document.querySelectorAll(".choice[data-v]").forEach(el => {
      const open = () => showTrilha(el.dataset.v, true);
      el.addEventListener("click", open);
      el.addEventListener("keydown", (e) => {
        if(e.key === "Enter" || e.key === " "){
          e.preventDefault();
          open();
        }
      });
    });

    $("btnDay1").addEventListener("click", () => {
      const d = DATA[currentV] || DATA.apostas;
      alert(`${d.day1Title}\n\n${d.day1Text}\n\nExerc√≠cio: escreva 10 linhas e fa√ßa seu check-in.`);
      document.getElementById("checkin").scrollIntoView({behavior:"smooth", block:"start"});
    });

    // Modal crise
    const overlay = $("overlay");
    const crisisModal = $("crisisModal");

    function openCrisisModal(){
      overlay.style.display = "block";
      crisisModal.style.display = "block";
      document.body.style.overflow = "hidden";
    }
    function closeCrisisModal(){
      overlay.style.display = "none";
      crisisModal.style.display = "none";
      document.body.style.overflow = "";
      stopBreathing();
    }

    $("btnCrisisTop").addEventListener("click", openCrisisModal);
    $("btnCrisisHero").addEventListener("click", openCrisisModal);
    $("btnCrisisTrilha").addEventListener("click", openCrisisModal);
    $("btnCloseModal").addEventListener("click", closeCrisisModal);
    overlay.addEventListener("click", closeCrisisModal);

    document.addEventListener("keydown", (e) => {
      if(e.key === "Escape") closeCrisisModal();
    });

    // Respira√ß√£o guiada
    const breathBall = $("breathBall");
    const breathTimer = $("breathTimer");
    const breathHint = $("breathHint");
    let breathInterval = null;
    let breathSeconds = 120;

    function fmtTime(sec){
      const m = String(Math.floor(sec/60)).padStart(2,"0");
      const s = String(sec%60).padStart(2,"0");
      return `${m}:${s}`;
    }

    function startBreathing(){
      stopBreathing();
      breathSeconds = 120;
      breathTimer.textContent = fmtTime(breathSeconds);
      breathHint.textContent = "Siga o ritmo visual.";
      breathBall.classList.add("breathing");

      breathInterval = setInterval(() => {
        breathSeconds--;
        breathTimer.textContent = fmtTime(Math.max(0, breathSeconds));

        if(breathSeconds <= 0){
          stopBreathing();
          breathTimer.textContent = "Feito ‚úÖ";
          breathHint.textContent = "Boa. Agora escolha uma a√ß√£o r√°pida.";
          toast("Boa. Voc√™ reduziu a urg√™ncia.");
        }
      }, 1000);
    }

    function stopBreathing(){
      if(breathInterval){
        clearInterval(breathInterval);
        breathInterval = null;
      }
      breathBall.classList.remove("breathing");
    }

    $("btnBreathStart").addEventListener("click", startBreathing);
    $("btnBreathStop").addEventListener("click", () => {
      stopBreathing();
      breathHint.textContent = "Pausado.";
      toast("Respira√ß√£o pausada.");
    });

    $("btnActionWater").addEventListener("click", () => toast("Beba √°gua agora e afaste-se do gatilho."));
    $("btnActionMove").addEventListener("click", () => toast("Mova o corpo por 1 minuto. S√≥ precisa vencer este momento."));
    $("btnActionCut").addEventListener("click", () => toast("Corta o gatilho e muda de ambiente por 5 minutos."));
    $("btnActionCheckin").addEventListener("click", () => {
      closeCrisisModal();
      if(viewTrilha.classList.contains("hidden")){
        showTrilha(localStorage.getItem("rp30_selected") || "apostas", true);
        setTimeout(() => document.getElementById("checkin").scrollIntoView({behavior:"smooth", block:"start"}), 280);
      } else {
        document.getElementById("checkin").scrollIntoView({behavior:"smooth", block:"start"});
      }
      toast("Volta pro check-in. Um dia por vez.");
    });

    // Check-in local
    function storageKey(){ return "rp30_checkins_" + currentV; }

    function loadCheckins(){
      try{
        return JSON.parse(localStorage.getItem(storageKey()) || "[]");
      }catch{
        return [];
      }
    }

    function saveCheckins(arr){
      localStorage.setItem(storageKey(), JSON.stringify(arr));
    }

    function formatDateBR(iso){
      return new Date(iso).toLocaleDateString("pt-BR");
    }

    function getStreak(arr){
      let streak = 0;
      for(let i = arr.length - 1; i >= 0; i--){
        if(arr[i].did === "ok") streak++;
        else break;
      }
      return streak;
    }

    function updateCheckinUI(){
      const arr = loadCheckins();
      const last = arr.length ? arr[arr.length - 1].date : null;
      const streak = getStreak(arr);

      $("last").textContent = last ? formatDateBR(last) : "‚Äî";
      $("streak").textContent = String(streak);

      const pct = Math.round((Math.min(streak,30) / 30) * 100);
      $("progBar").style.width = pct + "%";

      if(streak >= 30){
        $("rewardText").textContent = "üèÜ 30 dias! Certificado e relat√≥rio liberados. Voc√™ venceu hoje, repetidas vezes.";
      }else if(streak >= 14){
        $("rewardText").textContent = "üî• 14 dias! Badge ‚ÄúFortalecimento‚Äù desbloqueado.";
      }else if(streak >= 7){
        $("rewardText").textContent = "‚úÖ 7 dias! Badge ‚ÄúPrimeira Semana‚Äù + certificado liberado.";
      }else if(streak >= 3){
        $("rewardText").textContent = "‚úÖ 3 dias! Badge ‚ÄúIn√≠cio Forte‚Äù desbloqueado.";
      }else{
        $("rewardText").textContent = "Fa√ßa 7 dias seguidos sem cair e desbloqueie certificado + badge.";
      }
    }

    $("btnCheckin").addEventListener("click", () => {
      const arr = loadCheckins();
      arr.push({
        date: new Date().toISOString(),
        did: $("ciDid").value,
        urge: Number($("ciUrge").value),
        trigger: $("ciTrig").value
      });
      saveCheckins(arr);
      updateCheckinUI();
      toast("Check-in salvo. Um dia por vez.");
    });

    $("btnReset").addEventListener("click", () => {
      localStorage.removeItem(storageKey());
      updateCheckinUI();
      toast("Progresso zerado.");
    });

    $("btnBadges").addEventListener("click", () => {
      const streak = getStreak(loadCheckins());
      const badges = [];
      if(streak >= 3) badges.push("üèÖ In√≠cio Forte (3 dias)");
      if(streak >= 7) badges.push("üèÖ Primeira Semana (7 dias)");
      if(streak >= 14) badges.push("üèÖ Fortalecimento (14 dias)");
      if(streak >= 30) badges.push("üèÜ Reprograma 30 (30 dias)");

      alert(badges.length
        ? "Badges desbloqueados:\n\n" + badges.join("\n")
        : "Nenhum badge ainda. Fa√ßa 3 dias seguidos sem cair para desbloquear o primeiro.");
    });

    function downloadText(filename, content){
      const blob = new Blob([content], { type: "text/plain;charset=utf-8" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    }

    $("btnCert").addEventListener("click", () => {
      const arr = loadCheckins();
      const streak = getStreak(arr);

      if(streak < 7){
        alert("Para gerar o certificado, desbloqueie 7 dias seguidos sem cair.");
        return;
      }

      const name = prompt("Nome/apelido para o certificado:", "An√¥nimo") || "An√¥nimo";
      const d = DATA[currentV] || DATA.apostas;

      const txt = `CERTIFICADO ‚Äî REPROGRAMA 30

Certificamos que ${name}
concluiu um marco de consist√™ncia na trilha ${d.pill.replace("Trilha ‚Ä¢ ","")},
alcan√ßando ${streak} dias de progresso registrado.

Mensagem:
‚ÄúVoc√™ n√£o venceu para sempre.
Voc√™ venceu hoje.
E isso, repetido, muda uma vida.‚Äù

Reprograma 30
Suporte educacional/comportamental
`;
      downloadText(`certificado-${currentV}-${name}.txt`, txt);
      toast("Certificado baixado.");
    });

    $("btnReport").addEventListener("click", () => {
      const arr = loadCheckins();
      if(!arr.length){
        alert("Fa√ßa pelo menos 1 check-in para gerar relat√≥rio.");
        return;
      }

      const last30 = arr.slice(-30);
      const avgUrge = (last30.reduce((s, x) => s + (x.urge || 0), 0) / last30.length).toFixed(2);

      const trigMap = {};
      last30.forEach(x => {
        trigMap[x.trigger] = (trigMap[x.trigger] || 0) + 1;
      });

      const topTrig = Object.entries(trigMap)
        .sort((a,b) => b[1]-a[1])
        .slice(0,3)
        .map(([k,v]) => `- ${k}: ${v}`)
        .join("\n") || "- ‚Äî";

      const d = DATA[currentV] || DATA.apostas;
      const streak = getStreak(arr);

      const txt = `RELAT√ìRIO DE PROGRESSO ‚Äî REPROGRAMA 30

Trilha: ${d.pill.replace("Trilha ‚Ä¢ ","")}
Data de gera√ß√£o: ${new Date().toLocaleString("pt-BR")}

Resumo
- Streak atual: ${streak}
- Check-ins analisados: ${last30.length}
- Vontade m√©dia (0‚Äì5): ${avgUrge}

Gatilhos mais frequentes
${topTrig}

Observa√ß√£o
Este relat√≥rio √© um apoio de acompanhamento pessoal e n√£o substitui avalia√ß√£o profissional.
`;
      downloadText(`relatorio-${currentV}.txt`, txt);
      toast("Relat√≥rio baixado.");
    });

    // Rotas hash
    function initRoute(){
      const h = (location.hash || "").replace("#","").trim().toLowerCase();
      if(h && DATA[h]){
        showTrilha(h, false);
      }else{
        viewHome.classList.remove("hidden");
        viewTrilha.classList.add("hidden");
        navLinksHome.classList.remove("hidden");
        navLinksTrilha.classList.add("hidden");
        history.replaceState({view:"home"}, "", "#");
      }
    }

    window.addEventListener("popstate", (e) => {
      if(e.state?.view === "trilha" && e.state?.v){
        showTrilha(e.state.v, false);
      }else{
        showHome(false);
      }
    });

    initRoute();
    updateCheckinUI();
  </script>
</body>
</html>
