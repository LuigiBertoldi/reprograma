<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Reprograma 30 ‚Äî M√©todo Anti-V√≠cio</title>
  <meta name="description" content="Reprograma 30: m√©todo anti-v√≠cio com trilhas para apostas, √°lcool, cigarro, pornografia e drogas. Modo crise, check-in e progresso vis√≠vel." />
  <meta name="theme-color" content="#0B1020" />

  <style>
    :root{
      --bg:#0b1020;
      --bg-soft:#121932;
      --card:#121a31;
      --card-2:#0f162b;
      --line:rgba(255,255,255,.08);
      --line-2:rgba(255,255,255,.14);
      --text:#eef3ff;
      --muted:#aab5d1;

      --primary:#7c5cff;
      --primary-2:#2fd0ff;
      --accent:#ff62c8;

      --good:#35d081;
      --warn:#ffcd69;
      --bad:#ff6f8d;

      --radius:16px;
      --radius-lg:22px;
      --shadow:0 20px 50px rgba(0,0,0,.35);
      --max:1100px;
    }

    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    html{scroll-behavior:smooth}
    body{
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(700px 500px at 10% -10%, rgba(124,92,255,.16), transparent 60%),
        radial-gradient(700px 500px at 100% 0%, rgba(47,208,255,.10), transparent 60%),
        var(--bg);
      -webkit-font-smoothing:antialiased;
      text-rendering:optimizeLegibility;
    }

    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}
    button,input,select{font:inherit}
    .hidden{display:none!important}
    .wrap{max-width:var(--max);margin:0 auto;padding:0 14px}
    .muted{color:var(--muted)}
    .small{font-size:12px;line-height:1.55;color:var(--muted)}

    /* NAV (mobile-first) */
    .nav{
      position:sticky; top:0; z-index:50;
      backdrop-filter: blur(10px);
      background:rgba(11,16,32,.78);
      border-bottom:1px solid var(--line);
    }
    .nav-inner{
      height:64px;
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      min-width:0;
      cursor:pointer;
    }
    .logo{
      width:36px; height:36px; border-radius:12px;
      border:1px solid var(--line);
      background:linear-gradient(135deg, rgba(124,92,255,.2), rgba(47,208,255,.14));
      display:grid; place-items:center;
      flex:0 0 auto;
    }
    .brand-text{min-width:0}
    .brand-title{
      font-weight:900; font-size:14px; line-height:1;
      white-space:nowrap;
    }
    .brand-title span{
      background:linear-gradient(135deg,var(--primary),var(--primary-2));
      -webkit-background-clip:text;background-clip:text;color:transparent;
    }
    .brand-sub{
      margin-top:3px;
      font-size:11px; color:var(--muted);
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
      max-width:180px;
    }

    .nav-actions{display:flex; align-items:center; gap:8px; flex:0 0 auto;}
    .desktop-links{display:none}

    /* Buttons */
    .btn{
      border:1px solid transparent;
      border-radius:999px;
      padding:11px 14px;
      font-weight:800;
      font-size:14px;
      color:var(--text);
      background:rgba(255,255,255,.03);
      cursor:pointer;
      transition:.15s ease;
      display:inline-flex; align-items:center; justify-content:center; gap:8px;
      white-space:nowrap;
    }
    .btn:hover{transform:translateY(-1px)}
    .btn:active{transform:translateY(0)}
    .btn-sm{padding:8px 11px;font-size:12px}
    .btn-block{width:100%}
    .btn-primary{
      color:#071222;
      background:linear-gradient(135deg,var(--primary),var(--primary-2));
      box-shadow:0 10px 24px rgba(124,92,255,.18);
    }
    .btn-ghost{
      border-color:var(--line);
      background:rgba(255,255,255,.02);
      color:var(--text);
    }
    .btn-soft{
      border-color:var(--line);
      background:rgba(255,255,255,.05);
    }

    /* Sections */
    section{padding:26px 0}
    .section-head{margin-bottom:12px}
    .section-head h2{
      margin:0;
      font-size:20px;
      line-height:1.15;
      letter-spacing:-.3px;
    }
    .section-head p{
      margin:8px 0 0;
      color:var(--muted);
      font-size:13px;
      line-height:1.55;
    }

    /* Hero */
    header{padding:18px 0 8px}
    .hero{
      border:1px solid var(--line);
      border-radius:var(--radius-lg);
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      box-shadow:var(--shadow);
      padding:16px;
      position:relative;
      overflow:hidden;
    }
    .hero:before{
      content:"";
      position:absolute;
      width:240px;height:240px;border-radius:50%;
      right:-90px; top:-100px;
      background:radial-gradient(circle, rgba(47,208,255,.18), transparent 65%);
      pointer-events:none;
    }
    .hero:after{
      content:"";
      position:absolute;
      width:260px;height:260px;border-radius:50%;
      left:-120px; bottom:-130px;
      background:radial-gradient(circle, rgba(124,92,255,.15), transparent 65%);
      pointer-events:none;
    }

    .pills{
      display:flex; flex-wrap:wrap; gap:6px;
      margin-bottom:10px;
    }
    .pill{
      display:inline-flex; align-items:center; gap:6px;
      padding:6px 9px;
      border-radius:999px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.02);
      color:var(--muted);
      font-size:11px;
    }
    .dot{
      width:7px;height:7px;border-radius:50%;
      background:var(--good);
      box-shadow:0 0 0 4px rgba(53,208,129,.11);
    }

    .hero h1{
      margin:0;
      font-size:28px;
      line-height:1.03;
      letter-spacing:-.8px;
      max-width:14ch;
    }
    .hero .lead{
      margin:10px 0 0;
      color:var(--muted);
      font-size:14px;
      line-height:1.6;
    }

    .hero-actions{
      margin-top:14px;
      display:grid;
      gap:8px;
    }

    .mini-points{
      margin-top:14px;
      display:grid; gap:8px;
    }
    .mini-point{
      border:1px solid var(--line);
      border-radius:14px;
      background:rgba(255,255,255,.02);
      padding:10px 11px;
      display:flex; gap:9px; align-items:flex-start;
    }
    .spark{
      width:9px;height:9px;border-radius:50%;
      flex:0 0 auto;
      margin-top:4px;
      background:linear-gradient(135deg,var(--accent),var(--primary),var(--primary-2));
      box-shadow:0 0 0 5px rgba(124,92,255,.1);
    }
    .mini-point b{font-size:12px}
    .mini-point span{display:block;color:var(--muted);font-size:12px;line-height:1.45}

    .disclaimer{
      margin-top:12px;
      border-top:1px solid var(--line);
      padding-top:10px;
      font-size:11px;
      line-height:1.55;
      color:#ffd7df;
    }

    /* Cards & grids */
    .grid{display:grid; gap:10px}
    .grid-2,.grid-3{grid-template-columns:1fr}

    .card{
      border:1px solid var(--line);
      background:linear-gradient(180deg, rgba(255,255,255,.025), rgba(255,255,255,.015));
      border-radius:var(--radius);
      padding:14px;
    }
    .card h3{
      margin:0 0 6px;
      font-size:14px;
      line-height:1.25;
      letter-spacing:-.15px;
    }
    .card p{
      margin:0;
      color:var(--muted);
      font-size:13px;
      line-height:1.55;
    }
    .divider{
      height:1px;background:var(--line);
      margin:10px 0;
    }

    .badge{
      display:inline-block;
      padding:5px 8px;
      border-radius:999px;
      border:1px solid var(--line);
      font-size:10px;
      margin:2px 4px 0 0;
      color:var(--muted);
      background:rgba(255,255,255,.02);
    }
    .badge.good{border-color:rgba(53,208,129,.22); color:#b8f3d3; background:rgba(53,208,129,.08)}
    .badge.warn{border-color:rgba(255,205,105,.22); color:#ffe6ae; background:rgba(255,205,105,.08)}
    .badge.bad{border-color:rgba(255,111,141,.22); color:#ffd2dc; background:rgba(255,111,141,.08)}

    .choice{
      cursor:pointer;
      transition:.15s ease;
    }
    .choice:hover{
      border-color:rgba(47,208,255,.18);
      background:rgba(255,255,255,.03);
    }
    .choice-top{
      display:flex; align-items:flex-start; justify-content:space-between; gap:10px;
    }

    /* Feature list */
    .feature-list{
      margin:0; padding:0; list-style:none;
      display:grid; gap:9px;
    }
    .feature-list li{
      display:flex; gap:8px; align-items:flex-start;
      color:var(--muted);
      font-size:13px; line-height:1.45;
    }
    .check{
      width:17px;height:17px;border-radius:7px;
      display:grid; place-items:center;
      border:1px solid rgba(53,208,129,.22);
      background:rgba(53,208,129,.08);
      color:var(--good);
      font-weight:900;
      flex:0 0 auto;
      margin-top:1px;
    }

    /* Pricing */
    .pricing{
      display:grid;
      grid-template-columns:1fr;
      gap:10px;
    }
    .price.best{
      border-color:rgba(47,208,255,.18);
      background:linear-gradient(180deg, rgba(47,208,255,.05), rgba(255,255,255,.02));
      position:relative;
    }
    .ribbon{
      position:absolute; top:10px; right:10px;
      font-size:10px; font-weight:900;
      color:#08111f;
      background:linear-gradient(135deg,var(--primary),var(--primary-2));
      border-radius:999px;
      padding:5px 8px;
    }
    .money{
      margin:7px 0 2px;
      font-size:30px;
      line-height:1;
      font-weight:900;
      letter-spacing:-.7px;
    }
    .money small{
      font-size:12px;
      color:var(--muted);
      font-weight:700;
    }

    /* FAQ */
    .faq-list{display:grid; gap:8px}
    .faq-item{
      border:1px solid var(--line);
      border-radius:14px;
      overflow:hidden;
      background:rgba(255,255,255,.02);
    }
    .faq-btn{
      width:100%;
      border:0;
      background:transparent;
      color:var(--text);
      padding:12px;
      text-align:left;
      display:flex; justify-content:space-between; gap:10px; align-items:center;
      cursor:pointer;
      font-size:13px;
      font-weight:800;
    }
    .faq-icon{
      width:24px;height:24px;border-radius:9px;
      border:1px solid var(--line);
      display:grid; place-items:center;
      color:var(--muted);
      flex:0 0 auto;
    }
    .faq-panel{
      display:none;
      padding:0 12px 12px;
      color:var(--muted);
      font-size:12px;
      line-height:1.55;
    }
    .faq-item.open .faq-panel{display:block}
    .faq-item.open .faq-icon{color:var(--text)}

    /* Trilha / checkin */
    .kpi{
      border:1px solid var(--line);
      border-radius:14px;
      background:rgba(255,255,255,.02);
      padding:10px;
      display:flex; justify-content:space-between; gap:10px;
    }
    .kpi span{font-size:11px;color:var(--muted)}
    .kpi b{font-size:16px}
    .progress{
      margin-top:8px;
      height:10px;
      border-radius:999px;
      background:rgba(255,255,255,.05);
      border:1px solid rgba(255,255,255,.03);
      overflow:hidden;
    }
    .progress > div{
      height:100%;
      width:0%;
      background:linear-gradient(90deg,var(--primary),var(--primary-2));
    }

    .field-wrap{margin-top:10px}
    .field-label{
      display:block;
      font-size:12px;
      color:var(--muted);
      margin-bottom:6px;
    }
    .field{
      width:100%;
      border-radius:12px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.02);
      color:var(--text);
      padding:11px 12px;
      outline:none;
    }
    .field:focus{
      border-color:rgba(47,208,255,.25);
      box-shadow:0 0 0 4px rgba(47,208,255,.07);
    }
    select.field option{
      background:#141d35;
      color:#eef3ff;
    }
    input[type="range"]{width:100%}

    .btn-row{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:8px;
      margin-top:10px;
    }
    .btn-row.three{grid-template-columns:1fr 1fr 1fr}
    .btn-row .btn{padding:10px 10px;font-size:12px}

    /* Bottom sticky CTA mobile */
    .bottom-cta{
      position:fixed;
      left:0; right:0; bottom:0;
      z-index:40;
      padding:10px 12px calc(10px + env(safe-area-inset-bottom));
      background:linear-gradient(180deg, rgba(11,16,32,0), rgba(11,16,32,.9) 30%, rgba(11,16,32,.95));
      border-top:1px solid rgba(255,255,255,.03);
      display:flex; gap:8px;
    }
    .bottom-cta .btn{flex:1}
    body.with-bottom-pad{padding-bottom:84px}

    /* Crisis Bottom Sheet (mobile-first) */
    .overlay{
      position:fixed; inset:0; z-index:100;
      background:rgba(0,0,0,.58);
      backdrop-filter:blur(6px);
      display:none;
    }
    .sheet{
      position:fixed; left:0; right:0; bottom:0;
      z-index:101;
      background:linear-gradient(180deg, #111833, #0d1429);
      border-top-left-radius:20px;
      border-top-right-radius:20px;
      border:1px solid var(--line-2);
      border-bottom:0;
      box-shadow:0 -20px 60px rgba(0,0,0,.45);
      transform:translateY(100%);
      transition:transform .22s ease;
      max-height:min(86vh, 700px);
      overflow:auto;
      padding-bottom:calc(14px + env(safe-area-inset-bottom));
    }
    .sheet.open{transform:translateY(0)}
    .sheet-handle{
      width:42px;height:4px;border-radius:99px;
      background:rgba(255,255,255,.18);
      margin:10px auto 8px;
    }
    .sheet-head{
      padding:0 14px 8px;
      display:flex; justify-content:space-between; align-items:flex-start; gap:10px;
    }
    .sheet-head h3{margin:0;font-size:15px}
    .sheet-head p{margin:5px 0 0;color:var(--muted);font-size:12px;line-height:1.5}
    .icon-btn{
      width:34px;height:34px;border-radius:12px;
      border:1px solid var(--line);
      background:rgba(255,255,255,.03);
      color:var(--text);
      display:grid; place-items:center;
      cursor:pointer;
      flex:0 0 auto;
    }
    .sheet-body{
      padding:0 14px 14px;
      display:grid; gap:10px;
    }
    .sheet-card{
      border:1px solid var(--line);
      border-radius:14px;
      background:rgba(255,255,255,.02);
      padding:12px;
    }
    .sheet-card h4{margin:0 0 6px;font-size:13px}
    .sheet-card p{margin:0;color:var(--muted);font-size:12px;line-height:1.5}
    .breath-box{
      margin-top:10px;
      display:flex; gap:10px; align-items:center;
    }
    .breath-ball{
      width:64px;height:64px;border-radius:18px;
      border:1px solid var(--line);
      background:
        radial-gradient(circle at 30% 30%, rgba(47,208,255,.18), transparent 65%),
        radial-gradient(circle at 70% 70%, rgba(124,92,255,.15), transparent 65%),
        rgba(255,255,255,.02);
      flex:0 0 auto;
      transform:scale(.95);
    }
    .breathing{animation:breathe 6s ease-in-out infinite}
    @keyframes breathe{
      0%{transform:scale(.92)}
      50%{transform:scale(1.08)}
      100%{transform:scale(.92)}
    }
    .timer b{display:block;font-size:18px}
    .timer span{font-size:11px;color:var(--muted)}
    .sheet-grid-actions{
      display:grid; grid-template-columns:1fr 1fr; gap:8px; margin-top:10px;
    }
    .sheet-grid-actions .btn{padding:10px 8px; font-size:12px}

    /* Toast */
    .toast{
      position:fixed;
      left:50%; bottom:92px;
      transform:translateX(-50%);
      z-index:120;
      background:rgba(0,0,0,.65);
      border:1px solid var(--line);
      color:var(--text);
      border-radius:999px;
      padding:9px 12px;
      font-size:12px;
      display:none;
      max-width:calc(100% - 22px);
      text-align:center;
    }

    footer{
      padding:22px 0 26px;
      border-top:1px solid var(--line);
      margin-top:10px;
    }

    /* Tablet/Desktop */
    @media (min-width: 700px){
      .wrap{padding:0 18px}
      .nav-inner{height:70px}
      .brand-sub{max-width:none}
      .hero{padding:22px}
      .hero h1{font-size:38px}
      .hero-actions{display:flex;flex-wrap:wrap}
      .grid-2{grid-template-columns:repeat(2,1fr)}
      .pricing{grid-template-columns:repeat(2,1fr)}
      .btn-row{display:flex;flex-wrap:wrap}
      .btn-row .btn{font-size:13px}
      .sheet{
        left:50%; right:auto; bottom:16px;
        width:min(760px, calc(100% - 24px));
        transform:translate(-50%, 120%);
        border-radius:20px;
        border-bottom:1px solid var(--line-2);
        max-height:min(88vh, 720px);
      }
      .sheet.open{transform:translate(-50%, 0)}
      .sheet-body{grid-template-columns:1fr 1fr}
      .sheet-grid-actions{grid-template-columns:1fr 1fr}
      .toast{bottom:20px}
    }

    @media (min-width: 980px){
      .desktop-links{
        display:flex; gap:8px; align-items:center;
      }
      .desktop-links a{
        font-size:13px; color:var(--muted);
        padding:8px 10px; border-radius:999px;
        border:1px solid transparent;
      }
      .desktop-links a:hover{
        color:var(--text);
        border-color:var(--line);
        background:rgba(255,255,255,.03);
      }

      .hero-grid{
        display:grid;
        grid-template-columns:1.06fr .94fr;
        gap:14px;
        align-items:start;
      }
      .hero h1{font-size:44px}
      .hero-side{display:grid;gap:10px}
      .mini-points{margin-top:0}
      .grid-3{grid-template-columns:repeat(3,1fr)}
      .bottom-cta{display:none}
      body.with-bottom-pad{padding-bottom:0}
    }
  </style>
</head>
<body class="with-bottom-pad">

  <!-- NAV -->
  <div class="nav">
    <div class="wrap nav-inner">
      <div class="brand" id="goHome">
        <div class="logo" aria-hidden="true">
          <svg viewBox="0 0 64 64" width="22" height="22">
            <defs>
              <linearGradient id="g1" x1="0" y1="0" x2="1" y2="1">
                <stop offset="0" stop-color="#ff62c8"/>
                <stop offset=".55" stop-color="#7c5cff"/>
                <stop offset="1" stop-color="#2fd0ff"/>
              </linearGradient>
            </defs>
            <path d="M18 34c-4-3-6-7-6-12 0-9 6-16 15-16 3 0 6 1 8 3 2-2 5-3 8-3 9 0 15 7 15 16 0 5-2 9-6 12-1 1-2 3-2 5 0 5-3 8-8 8-2 0-4-1-6-3-2 2-4 3-6 3-5 0-8-3-8-8 0-2-1-4-2-5Z" fill="url(#g1)" opacity=".95"/>
            <path d="M20 31h24" stroke="#fff" stroke-opacity=".85" stroke-width="4.3" stroke-linecap="round"/>
          </svg>
        </div>
        <div class="brand-text">
          <div class="brand-title">Reprograma <span>30</span></div>
          <div class="brand-sub" id="navSubtitle">M√©todo Anti-V√≠cio ‚Ä¢ Um dia por vez</div>
        </div>
      </div>

      <div class="desktop-links" id="navLinksHome">
        <a href="#identificar">Trilhas</a>
        <a href="#metodo">M√©todo</a>
        <a href="#planos">Planos</a>
        <a href="#faq">FAQ</a>
      </div>
      <div class="desktop-links hidden" id="navLinksTrilha">
        <a href="#trilha">Trilha</a>
        <a href="#checkin">Check-in</a>
        <a href="#planos">Assinar</a>
      </div>

      <div class="nav-actions">
        <button class="btn btn-ghost btn-sm" id="btnCrisisTop" type="button">Crise</button>
        <button class="btn btn-primary btn-sm" id="btnPrimaryTop" type="button">Come√ßar</button>
      </div>
    </div>
  </div>

  <!-- HOME -->
  <main id="viewHome">
    <header>
      <div class="wrap">
        <div class="hero">
          <div class="hero-grid">
            <div>
              <div class="pills">
                <span class="pill"><span class="dot"></span>Sem julgamento</span>
                <span class="pill">Privacidade</span>
                <span class="pill">Um dia por vez</span>
              </div>

              <h1>Voc√™ n√£o √© fraco. Voc√™ est√° preso em um ciclo.</h1>

              <p class="lead">
                O <b>Reprograma 30</b> √© um m√©todo pr√°tico de reestrutura√ß√£o comportamental para pessoas que querem retomar o controle de v√≠cios e compuls√µes ‚Äî com passos claros, estrutura di√°ria e progresso vis√≠vel.
              </p>

              <div class="hero-actions">
                <button class="btn btn-primary btn-block" id="btnStartIdentify" type="button">Quero me identificar e come√ßar</button>
                <a class="btn btn-ghost btn-block" href="#metodo">Entender como funciona</a>
              </div>

              <div class="disclaimer">
                Conte√∫do educacional/comportamental. N√£o substitui acompanhamento m√©dico, psicol√≥gico ou psiqui√°trico.
                Em situa√ß√µes de risco, procure ajuda profissional imediatamente (CVV 188 / Emerg√™ncia 192).
              </div>
            </div>

            <div class="hero-side">
              <div class="mini-points">
                <div class="mini-point">
                  <span class="spark"></span>
                  <div><b>Trilhas espec√≠ficas</b><span>Apostas, √°lcool, cigarro, pornografia e drogas.</span></div>
                </div>
                <div class="mini-point">
                  <span class="spark"></span>
                  <div><b>Modo crise</b><span>Ferramenta para o momento do impulso.</span></div>
                </div>
                <div class="mini-point">
                  <span class="spark"></span>
                  <div><b>Check-in e progresso</b><span>Streak, badges, certificado e relat√≥rio local.</span></div>
                </div>
                <div class="mini-point">
                  <span class="spark"></span>
                  <div><b>Sem promessa milagrosa</b><span>Foco em estrutura, consist√™ncia e retomada de controle.</span></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <section id="identificar">
      <div class="wrap">
        <div class="section-head">
          <h2>Qual dessas situa√ß√µes mais parece com voc√™ hoje?</h2>
          <p>Escolha a trilha que mais representa seu momento. Voc√™ pode come√ßar por uma e trocar depois.</p>
        </div>

        <div class="grid grid-3">
          <div class="card choice" data-v="apostas" role="button" tabindex="0">
            <div class="choice-top">
              <h3>üéØ Apostas</h3>
              <span class="badge good">Abrir</span>
            </div>
            <p>Perda de dinheiro, ansiedade, ‚Äús√≥ mais uma‚Äù, tentativa de recuperar preju√≠zo e impulso no celular.</p>
            <div class="divider"></div>
            <span class="badge bad">urg√™ncia</span>
            <span class="badge warn">impulso</span>
            <span class="badge warn">digital</span>
          </div>

          <div class="card choice" data-v="alcool" role="button" tabindex="0">
            <div class="choice-top">
              <h3>üç∫ √Ålcool</h3>
              <span class="badge good">Abrir</span>
            </div>
            <p>Uso por estresse, rotina social, fim de semana, reca√≠das e dificuldade de manter consist√™ncia.</p>
            <div class="divider"></div>
            <span class="badge warn">social</span>
            <span class="badge warn">rotina</span>
          </div>

          <div class="card choice" data-v="fumar" role="button" tabindex="0">
            <div class="choice-top">
              <h3>üö¨ Cigarro</h3>
              <span class="badge good">Abrir</span>
            </div>
            <p>H√°bito autom√°tico, ansiedade, ‚Äúpausas‚Äù durante o dia, gatilhos fixos e depend√™ncia de rotina.</p>
            <div class="divider"></div>
            <span class="badge warn">h√°bito</span>
            <span class="badge warn">ansiedade</span>
          </div>

          <div class="card choice" data-v="pornografia" role="button" tabindex="0">
            <div class="choice-top">
              <h3>üß† Pornografia</h3>
              <span class="badge good">Abrir</span>
            </div>
            <p>Compuls√£o, escapismo, culpa, gatilhos digitais, perda de foco e sensa√ß√£o de descontrole.</p>
            <div class="divider"></div>
            <span class="badge warn">digital</span>
            <span class="badge warn">isolamento</span>
          </div>

          <div class="card choice" data-v="drogas" role="button" tabindex="0">
            <div class="choice-top">
              <h3>‚ö†Ô∏è Drogas</h3>
              <span class="badge good">Abrir</span>
            </div>
            <p>Gatilhos sociais, ambiente, fuga emocional, reca√≠das e necessidade de prote√ß√£o e estrutura.</p>
            <div class="divider"></div>
            <span class="badge bad">aten√ß√£o</span>
            <span class="badge warn">apoio</span>
          </div>

          <div class="card">
            <h3>‚ùì N√£o sei por onde come√ßar</h3>
            <p>Comece pelo que mais est√° te prejudicando hoje. O mais importante √© come√ßar.</p>
            <div class="divider"></div>
            <button class="btn btn-primary btn-block" id="btnStartAny" type="button">Come√ßar agora</button>
          </div>
        </div>
      </div>
    </section>

    <section id="metodo">
      <div class="wrap">
        <div class="section-head">
          <h2>Como o Reprograma 30 funciona</h2>
          <p>Uma estrutura simples para sair do autom√°tico e recuperar o controle no dia a dia.</p>
        </div>

        <div class="grid grid-2">
          <div class="card">
            <h3>1) Consci√™ncia</h3>
            <p>Entender gatilhos, hor√°rios, emo√ß√µes e padr√µes que alimentam o ciclo.</p>
          </div>
          <div class="card">
            <h3>2) Interrup√ß√£o</h3>
            <p>Aplicar barreiras e a√ß√µes r√°pidas para atravessar o momento de impulso.</p>
          </div>
          <div class="card">
            <h3>3) Reconstru√ß√£o</h3>
            <p>Substituir o h√°bito por a√ß√µes funcionais e rotina mais est√°vel.</p>
          </div>
          <div class="card">
            <h3>4) Consolida√ß√£o</h3>
            <p>Manter progresso, prevenir reca√≠das e construir continuidade.</p>
          </div>
        </div>

        <div class="card" style="margin-top:10px">
          <h3>O ponto principal</h3>
          <p><b>A diferen√ßa n√£o est√° em ‚Äúquerer mais‚Äù. Est√° em ter estrutura quando a vontade falha.</b></p>
        </div>
      </div>
    </section>

    <section id="valor">
      <div class="wrap">
        <div class="section-head">
          <h2>O que voc√™ encontra dentro da plataforma</h2>
          <p>Tudo pensado para ser simples, direto e √∫til no dia a dia ‚Äî inclusive em momentos dif√≠ceis.</p>
        </div>

        <div class="grid grid-2">
          <div class="card">
            <h3>Recursos inclu√≠dos</h3>
            <ul class="feature-list">
              <li><span class="check">‚úì</span><span>Trilhas por tipo de v√≠cio</span></li>
              <li><span class="check">‚úì</span><span>Estrutura pr√°tica de 30 dias</span></li>
              <li><span class="check">‚úì</span><span>Modo crise para impulso</span></li>
              <li><span class="check">‚úì</span><span>Check-in di√°rio com progresso vis√≠vel</span></li>
              <li><span class="check">‚úì</span><span>Badges, certificado e relat√≥rio (local)</span></li>
              <li><span class="check">‚úì</span><span>Conte√∫do direto e sem julgamento</span></li>
            </ul>
          </div>

          <div class="card">
            <h3>Para quem √©</h3>
            <ul class="feature-list">
              <li><span class="check">‚úì</span><span>Quem quer retomar o controle</span></li>
              <li><span class="check">‚úì</span><span>Quem j√° tentou sozinho e voltou ao ciclo</span></li>
              <li><span class="check">‚úì</span><span>Quem precisa de estrutura pr√°tica</span></li>
              <li><span class="check">‚úì</span><span>Quem quer come√ßar agora</span></li>
            </ul>
            <div class="divider"></div>
            <p class="small">N√£o substitui tratamento m√©dico/psiqui√°trico. Em casos graves, o ideal √© usar com apoio profissional.</p>
          </div>
        </div>
      </div>
    </section>

    <section id="planos">
      <div class="wrap">
        <div class="section-head">
          <h2>Escolha seu plano de acesso</h2>
          <p>Comece agora e tenha acesso √†s trilhas, ferramentas e estrutura do m√©todo.</p>
        </div>

        <div class="pricing">
          <div class="card price">
            <h3>Mensal</h3>
            <div class="money">R$ 29 <small>/ m√™s</small></div>
            <p class="small">Ideal para come√ßar agora e testar a plataforma com acesso completo.</p>
            <div class="divider"></div>
            <ul class="feature-list">
              <li><span class="check">‚úì</span><span>Acesso √†s trilhas</span></li>
              <li><span class="check">‚úì</span><span>Estrutura de 30 dias</span></li>
              <li><span class="check">‚úì</span><span>Modo crise + check-in</span></li>
            </ul>
            <div style="margin-top:12px">
              <a class="btn btn-primary btn-block" href="https://pay.kiwify.com.br/RrMdJme" target="_blank" rel="noopener">Assinar mensal</a>
            </div>
          </div>

          <div class="card price best">
            <span class="ribbon">MAIS VENDIDO</span>
            <h3>Trimestral</h3>
            <div class="money">R$ 69 <small>/ 3 meses</small></div>
            <p class="small">Melhor custo-benef√≠cio para quem quer mais tempo para consolidar resultados.</p>
            <div class="divider"></div>
            <ul class="feature-list">
              <li><span class="check">‚úì</span><span>Melhor valor por per√≠odo</span></li>
              <li><span class="check">‚úì</span><span>Mais tempo para consist√™ncia</span></li>
              <li><span class="check">‚úì</span><span>Continuidade e preven√ß√£o de reca√≠da</span></li>
            </ul>
            <div style="margin-top:12px">
              <a class="btn btn-primary btn-block" href="https://pay.kiwify.com.br/Kgog3p3" target="_blank" rel="noopener">Assinar trimestral</a>
            </div>
          </div>
        </div>

        <p class="small" style="margin-top:10px">Pagamento processado pela Kiwify.</p>
      </div>
    </section>

    <section id="faq">
      <div class="wrap">
        <div class="section-head">
          <h2>Perguntas frequentes</h2>
          <p>Respostas claras para reduzir d√∫vidas e passar confian√ßa.</p>
        </div>

        <div class="faq-list" id="faqList">
          <div class="faq-item">
            <button class="faq-btn" type="button" aria-expanded="false">
              <span>Isso substitui terapia ou tratamento?</span>
              <span class="faq-icon">+</span>
            </button>
            <div class="faq-panel">
              N√£o. O Reprograma 30 √© suporte educacional/comportamental. Em casos moderados ou graves, o ideal √© usar junto com acompanhamento profissional.
            </div>
          </div>

          <div class="faq-item">
            <button class="faq-btn" type="button" aria-expanded="false">
              <span>Se eu recair, significa que falhei?</span>
              <span class="faq-icon">+</span>
            </button>
            <div class="faq-panel">
              N√£o. Reca√≠da n√£o apaga o progresso. O m√©todo trabalha retomada, identifica√ß√£o de gatilhos e continuidade.
            </div>
          </div>

          <div class="faq-item">
            <button class="faq-btn" type="button" aria-expanded="false">
              <span>Posso trocar de trilha depois?</span>
              <span class="faq-icon">+</span>
            </button>
            <div class="faq-panel">
              Sim. Voc√™ pode come√ßar pela trilha mais urgente e mudar depois conforme sua necessidade.
            </div>
          </div>

          <div class="faq-item">
            <button class="faq-btn" type="button" aria-expanded="false">
              <span>Quanto tempo por dia eu preciso?</span>
              <span class="faq-icon">+</span>
            </button>
            <div class="faq-panel">
              Em m√©dia, de 8 a 12 minutos por dia para aplicar o b√°sico da estrutura.
            </div>
          </div>

          <div class="faq-item">
            <button class="faq-btn" type="button" aria-expanded="false">
              <span>Como funcionam as recompensas sem custo?</span>
              <span class="faq-icon">+</span>
            </button>
            <div class="faq-panel">
              Badges, certificado e relat√≥rio s√£o gerados localmente no navegador, sem custo extra.
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer>
      <div class="wrap">
        <p class="small">
          <b>Reprograma 30</b> √© suporte educacional/comportamental. N√£o substitui tratamento profissional.
          Em risco imediato: CVV 188 / Emerg√™ncia 192.
        </p>
        <p class="small">¬© <span id="yearHome"></span> Reprograma 30.</p>
      </div>
    </footer>
  </main>

  <!-- TRILHA -->
  <main id="viewTrilha" class="hidden">
    <header>
      <div class="wrap">
        <div class="hero">
          <div class="pills">
            <span class="pill"><span class="dot"></span><span id="pillType">Trilha</span></span>
            <span class="pill">8‚Äì12 min/dia</span>
            <span class="pill">Progresso vis√≠vel</span>
          </div>

          <h1 id="trTitle">Trilha</h1>
          <p class="lead" id="trDesc">...</p>

          <div class="hero-actions">
            <button class="btn btn-primary btn-block" id="btnDay1" type="button">Come√ßar Dia 1</button>
            <button class="btn btn-ghost btn-block" id="btnCrisisTrilha" type="button">Abrir modo crise</button>
          </div>

          <div class="disclaimer">
            Suporte educacional/comportamental. N√£o substitui tratamento profissional. Em situa√ß√£o de risco, procure ajuda profissional imediatamente.
          </div>
        </div>
      </div>
    </header>

    <section id="trilha">
      <div class="wrap">
        <div class="section-head">
          <h2>Estrutura da trilha (30 dias)</h2>
          <p>Mesma l√≥gica do m√©todo ‚Äî mudam os exemplos, gatilhos e a√ß√µes pr√°ticas.</p>
        </div>

        <div class="grid grid-2">
          <div class="card">
            <h3>Fase 1 ‚Äî Consci√™ncia (1‚Äì7)</h3>
            <p id="p1">...</p>
          </div>
          <div class="card">
            <h3>Fase 2 ‚Äî Interrup√ß√£o (8‚Äì14)</h3>
            <p id="p2">...</p>
          </div>
          <div class="card">
            <h3>Fase 3 ‚Äî Reconstru√ß√£o (15‚Äì21)</h3>
            <p id="p3">...</p>
          </div>
          <div class="card">
            <h3>Fase 4 ‚Äî Consolida√ß√£o (22‚Äì30)</h3>
            <p id="p4">...</p>
          </div>
        </div>

        <div class="card" style="margin-top:10px">
          <h3>O que pode mudar em 7 dias</h3>
          <p id="in7">...</p>
          <div class="divider"></div>
          <h3>O que pode mudar em 30 dias</h3>
          <p id="in30">...</p>
        </div>
      </div>
    </section>

    <section id="checkin">
      <div class="wrap">
        <div class="section-head">
          <h2>Check-in di√°rio (demo local)</h2>
          <p>Salvo no navegador. Zero custo. Progresso vis√≠vel para refor√ßar consist√™ncia.</p>
        </div>

        <div class="grid grid-2">
          <div class="card">
            <h3>Seu progresso</h3>
            <div class="divider"></div>

            <div class="kpi">
              <div><span>Streak</span><br><b id="streak">0</b></div>
              <div style="text-align:right"><span>√öltimo check-in</span><br><b id="last">‚Äî</b></div>
            </div>
            <div class="progress"><div id="progBar"></div></div>

            <div class="field-wrap">
              <label class="field-label" for="ciDid">Hoje eu‚Ä¶</label>
              <select id="ciDid" class="field">
                <option value="ok">N√£o ca√≠</option>
                <option value="slip">Quase ca√≠</option>
                <option value="relapse">Ca√≠</option>
              </select>
            </div>

            <div class="field-wrap">
              <label class="field-label" for="ciUrge">Vontade (0‚Äì5)</label>
              <input id="ciUrge" type="range" min="0" max="5" value="2">
            </div>

            <div class="field-wrap">
              <label class="field-label" for="ciTrig">Gatilho principal</label>
              <select id="ciTrig" class="field">
                <option>T√©dio</option>
                <option>Ansiedade/Estresse</option>
                <option>Tristeza/Solid√£o</option>
                <option>Ambiente/Social</option>
                <option>Celular/Feed</option>
              </select>
            </div>

            <div class="btn-row">
              <button class="btn btn-primary" id="btnCheckin" type="button">Salvar</button>
              <button class="btn btn-ghost" id="btnReset" type="button">Zerar</button>
            </div>

            <div class="btn-row three">
              <button class="btn btn-ghost" id="btnBadges" type="button">Badges</button>
              <button class="btn btn-ghost" id="btnCert" type="button">Certificado</button>
              <button class="btn btn-ghost" id="btnReport" type="button">Relat√≥rio</button>
            </div>
          </div>

          <div class="card">
            <h3>Recompensas (zero custo)</h3>
            <p class="small">Progresso vis√≠vel mant√©m voc√™ no processo. O foco √© consist√™ncia, n√£o perfei√ß√£o.</p>
            <div class="divider"></div>
            <p class="small" id="rewardText">Fa√ßa 7 dias seguidos sem cair e desbloqueie certificado + badge.</p>

            <div class="divider"></div>
            <h3>Assinar acesso completo</h3>
            <p class="small">Para liberar conte√∫do completo das trilhas e continuidade de 90 dias.</p>

            <div class="btn-row">
              <a class="btn btn-primary" href="https://pay.kiwify.com.br/RrMdJme" target="_blank" rel="noopener">Mensal</a>
              <a class="btn btn-soft" href="https://pay.kiwify.com.br/Kgog3p3" target="_blank" rel="noopener">Trimestral</a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="planos">
      <div class="wrap">
        <div class="section-head">
          <h2>Planos de acesso</h2>
          <p>Mesmos links Kiwify para finalizar a assinatura.</p>
        </div>

        <div class="pricing">
          <div class="card price">
            <h3>Mensal</h3>
            <div class="money">R$ 29 <small>/ m√™s</small></div>
            <ul class="feature-list">
              <li><span class="check">‚úì</span><span>Todas as trilhas</span></li>
              <li><span class="check">‚úì</span><span>Conte√∫do completo 30 dias</span></li>
              <li><span class="check">‚úì</span><span>Modo crise e progresso</span></li>
            </ul>
            <div style="margin-top:12px">
              <a class="btn btn-primary btn-block" href="https://pay.kiwify.com.br/RrMdJme" target="_blank" rel="noopener">Assinar mensal</a>
            </div>
          </div>

          <div class="card price best">
            <span class="ribbon">MAIS VENDIDO</span>
            <h3>Trimestral</h3>
            <div class="money">R$ 69 <small>/ 3 meses</small></div>
            <ul class="feature-list">
              <li><span class="check">‚úì</span><span>Melhor custo-benef√≠cio</span></li>
              <li><span class="check">‚úì</span><span>90 dias para consolidar</span></li>
              <li><span class="check">‚úì</span><span>Mais continuidade</span></li>
            </ul>
            <div style="margin-top:12px">
              <a class="btn btn-primary btn-block" href="https://pay.kiwify.com.br/Kgog3p3" target="_blank" rel="noopener">Assinar trimestral</a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer>
      <div class="wrap">
        <p class="small"><b>Reprograma 30</b> √© suporte educacional/comportamental. N√£o substitui tratamento profissional.</p>
        <p class="small">¬© <span id="yearTrilha"></span> Reprograma 30.</p>
      </div>
    </footer>
  </main>

  <!-- Bottom CTA mobile -->
  <div class="bottom-cta" id="bottomCta">
    <button class="btn btn-ghost" id="btnBottomCrisis" type="button">Modo crise</button>
    <button class="btn btn-primary" id="btnBottomMain" type="button">Come√ßar</button>
  </div>

  <!-- Crisis Sheet -->
  <div class="overlay" id="overlay"></div>
  <div class="sheet" id="crisisSheet" aria-modal="true" role="dialog" aria-labelledby="crisisTitle">
    <div class="sheet-handle" aria-hidden="true"></div>
    <div class="sheet-head">
      <div>
        <h3 id="crisisTitle">Modo Crise</h3>
        <p>Seu objetivo agora n√£o √© resolver tudo. √â atravessar este momento sem cair no impulso.</p>
      </div>
      <button class="icon-btn" id="btnCloseSheet" type="button" aria-label="Fechar">‚úï</button>
    </div>

    <div class="sheet-body">
      <div class="sheet-card">
        <h4>Respira√ß√£o guiada (2 min)</h4>
        <p>Inspire 4s ‚Ä¢ segure 2s ‚Ä¢ solte 6s. Reduzir a urg√™ncia fisiol√≥gica ajuda a recuperar controle.</p>

        <div class="breath-box">
          <div class="breath-ball" id="breathBall"></div>
          <div class="timer">
            <b id="breathTimer">02:00</b>
            <span id="breathHint">Pronto para iniciar.</span>
          </div>
        </div>

        <div class="sheet-grid-actions">
          <button class="btn btn-primary" id="btnBreathStart" type="button">Iniciar</button>
          <button class="btn btn-ghost" id="btnBreathStop" type="button">Parar</button>
        </div>
      </div>

      <div class="sheet-card">
        <h4>A√ß√µes r√°pidas (30‚Äì60s)</h4>
        <p>Escolha uma a√ß√£o agora. Mudar corpo e ambiente reduz impulso.</p>

        <div class="sheet-grid-actions">
          <button class="btn btn-ghost" id="btnActionWater" type="button">Beber √°gua</button>
          <button class="btn btn-ghost" id="btnActionMove" type="button">Mover corpo</button>
          <button class="btn btn-ghost" id="btnActionCut" type="button">Cortar gatilho</button>
          <button class="btn btn-soft" id="btnActionCheckin" type="button">Ir check-in</button>
        </div>

        <div class="divider"></div>
        <p class="small">Se houver risco √† sua seguran√ßa, procure ajuda profissional imediatamente (CVV 188 / Emerg√™ncia 192).</p>
      </div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <script>
    const $ = (id) => document.getElementById(id);

    function toast(msg){
      const t = $("toast");
      t.textContent = msg;
      t.style.display = "block";
      clearTimeout(window.__toast);
      window.__toast = setTimeout(()=> t.style.display = "none", 2400);
    }

    $("yearHome").textContent = new Date().getFullYear();
    $("yearTrilha").textContent = new Date().getFullYear();

    // Views / nav
    const viewHome = $("viewHome");
    const viewTrilha = $("viewTrilha");
    const navLinksHome = $("navLinksHome");
    const navLinksTrilha = $("navLinksTrilha");
    const navSubtitle = $("navSubtitle");
    const btnPrimaryTop = $("btnPrimaryTop");
    const btnBottomMain = $("btnBottomMain");
    const bottomCta = $("bottomCta");

    function updateBottomCTA(){
      const inHome = !viewHome.classList.contains("hidden");
      btnBottomMain.textContent = inHome ? "Come√ßar" : "Assinar";
    }

    function showHome(push = true){
      viewHome.classList.remove("hidden");
      viewTrilha.classList.add("hidden");
      navLinksHome.classList.remove("hidden");
      navLinksTrilha.classList.add("hidden");
      navSubtitle.textContent = "M√©todo Anti-V√≠cio ‚Ä¢ Um dia por vez";
      btnPrimaryTop.textContent = "Come√ßar";
      updateBottomCTA();

      if(push) history.pushState({view:"home"}, "", "#");
      window.scrollTo({top:0, behavior:"smooth"});
    }

    function showTrilha(v, push = true){
      const d = DATA[v] || DATA.apostas;
      viewHome.classList.add("hidden");
      viewTrilha.classList.remove("hidden");
      navLinksHome.classList.add("hidden");
      navLinksTrilha.classList.remove("hidden");
      navSubtitle.textContent = d.pill;
      btnPrimaryTop.textContent = "Assinar";
      applyTrilha(v);
      updateBottomCTA();

      if(push) history.pushState({view:"trilha", v}, "", "#" + v);
      window.scrollTo({top:0, behavior:"smooth"});
    }

    $("goHome").addEventListener("click", () => showHome(true));

    function handleMainCTA(){
      const inHome = !viewHome.classList.contains("hidden");
      if(inHome){
        document.getElementById("identificar").scrollIntoView({behavior:"smooth", block:"start"});
      }else{
        document.getElementById("planos").scrollIntoView({behavior:"smooth", block:"start"});
      }
    }

    btnPrimaryTop.addEventListener("click", handleMainCTA);
    btnBottomMain.addEventListener("click", handleMainCTA);
    $("btnStartIdentify").addEventListener("click", ()=> document.getElementById("identificar").scrollIntoView({behavior:"smooth", block:"start"}));
    $("btnStartAny").addEventListener("click", ()=> showTrilha("apostas", true));

    // FAQ accordion
    (function(){
      const root = $("faqList");
      const items = [...root.querySelectorAll(".faq-item")];
      items.forEach(item=>{
        const btn = item.querySelector(".faq-btn");
        const icon = item.querySelector(".faq-icon");
        btn.addEventListener("click", ()=>{
          const open = item.classList.contains("open");
          items.forEach(i=>{
            i.classList.remove("open");
            i.querySelector(".faq-btn").setAttribute("aria-expanded","false");
            i.querySelector(".faq-icon").textContent = "+";
          });
          if(!open){
            item.classList.add("open");
            btn.setAttribute("aria-expanded","true");
            icon.textContent = "‚Äì";
          }
        });
      });
    })();

    // Trilhas content
    const DATA = {
      apostas:{
        pill:"Trilha ‚Ä¢ Apostas",
        title:"Apostas: recuperar controle e quebrar o ciclo do ‚Äús√≥ mais uma‚Äù",
        desc:"Voc√™ vai reduzir gatilhos digitais, organizar o momento cr√≠tico e reconstruir controle emocional e financeiro ‚Äî um dia por vez.",
        p1:"Diagn√≥stico real de perdas e padr√µes, entendimento do ciclo do quase-ganho e mapeamento de gatilhos (t√©dio, ansiedade, celular e hor√°rios).",
        p2:"Bloqueio de apps/sites, limpeza de feed, regra das 24h, t√©cnica de adiamento da vontade e plano de crise.",
        p3:"Reorganiza√ß√£o de rotina, redirecionamento de dopamina e refor√ßo de controle financeiro e emocional.",
        p4:"Plano anti-reca√≠da, continuidade de 90 dias e fortalecimento da identidade de quem retoma o controle.",
        in7:"Mais clareza sobre gatilhos e menos impulso autom√°tico nos momentos de risco.",
        in30:"Mais organiza√ß√£o, menos reca√≠das e mais controle emocional e financeiro.",
        day1Title:"Dia 1 ‚Äî Diagn√≥stico real (Apostas)",
        day1Text:"Escreva quanto perdeu, quando costuma apostar, quais emo√ß√µes aparecem antes, quais gatilhos digitais ativam a vontade e qual o custo invis√≠vel disso na sua vida. Clareza corta o autom√°tico."
      },
      alcool:{
        pill:"Trilha ‚Ä¢ √Ålcool",
        title:"√Ålcool: sair do ‚Äús√≥ hoje‚Äù e quebrar o padr√£o de fim de semana",
        desc:"Voc√™ vai mapear gatilhos sociais, criar alternativas reais e organizar uma rotina que sustente consist√™ncia.",
        p1:"Mapear quando, com quem e por que bebe, identificar emo√ß√µes antes do uso e entender padr√£o de reca√≠da em finais de semana e eventos.",
        p2:"Estrat√©gias para situa√ß√µes sociais, regras de prote√ß√£o pessoal, alternativas em encontros e plano r√°pido para gatilho social.",
        p3:"Rotina de energia e descanso, redu√ß√£o de estresse e refor√ßo de autocontrole.",
        p4:"Preven√ß√£o de reca√≠da em datas/eventos, continuidade e plano de retomada se houver queda.",
        in7:"Mais consci√™ncia de onde voc√™ escorrega e um plano melhor para lidar com situa√ß√µes sociais.",
        in30:"Mais consist√™ncia, melhor energia e mais controle sobre gatilhos de fim de semana.",
        day1Title:"Dia 1 ‚Äî Mapa do padr√£o (√Ålcool)",
        day1Text:"Escreva quando voc√™ bebe, com quem, o que sente antes e o que acontece depois. Identifique 3 gatilhos e defina 1 mudan√ßa de ambiente para esta semana."
      },
      fumar:{
        pill:"Trilha ‚Ä¢ Cigarro",
        title:"Cigarro: quebrar o autom√°tico e substituir a ‚Äúpausa‚Äù",
        desc:"Voc√™ vai identificar gatilhos fixos, trocar pausas autom√°ticas e criar um plano simples para ansiedade e rotina.",
        p1:"Mapear momentos autom√°ticos (caf√©, estresse, p√≥s-refei√ß√£o), entender a fun√ß√£o do cigarro na rotina e identificar gatilhos fixos.",
        p2:"Troca de pausa por micro-a√ß√µes funcionais, regra de atraso da vontade e redu√ß√£o de acessibilidade.",
        p3:"Rotina curta para ansiedade, pausas conscientes e continuidade em hor√°rios cr√≠ticos.",
        p4:"Preven√ß√£o de reca√≠das, estrat√©gias para dias dif√≠ceis e manuten√ß√£o do padr√£o novo.",
        in7:"Menos autom√°tico e mais consci√™ncia das pausas e gatilhos do dia.",
        in30:"Mais controle sobre a rotina e redu√ß√£o do padr√£o autom√°tico de fumar.",
        day1Title:"Dia 1 ‚Äî Gatilhos fixos (Cigarro)",
        day1Text:"Liste 5 momentos do dia em que o cigarro aparece no autom√°tico. Para cada um, escreva uma alternativa de 2 minutos."
      },
      pornografia:{
        pill:"Trilha ‚Ä¢ Pornografia",
        title:"Pornografia: quebrar compuls√£o e reduzir gatilhos digitais",
        desc:"Voc√™ vai reduzir exposi√ß√£o, criar barreiras no ambiente digital e reconstruir rotina, foco e energia.",
        p1:"Mapear hor√°rios cr√≠ticos, identificar emo√ß√µes antes do impulso e entender o ciclo culpa ‚Üí repeti√ß√£o.",
        p2:"Higiene digital, barreiras pr√°ticas, redu√ß√£o de est√≠mulos e protocolo de crise para momentos cr√≠ticos.",
        p3:"Substitui√ß√£o de h√°bito, rotina de foco/energia e organiza√ß√£o de ambiente.",
        p4:"Preven√ß√£o de reca√≠da, continuidade de 90 dias e fortalecimento de rotina.",
        in7:"Menos gatilhos digitais e mais controle sobre o hor√°rio cr√≠tico.",
        in30:"Mais foco, energia e rotina; menos compuls√£o e mais clareza para manter progresso.",
        day1Title:"Dia 1 ‚Äî Padr√£o e gatilhos (Pornografia)",
        day1Text:"Escreva o hor√°rio cr√≠tico, a emo√ß√£o que aparece antes e o contexto. Remova hoje 1 gatilho digital (app, conta, hist√≥rico ou acesso f√°cil)."
      },
      drogas:{
        pill:"Trilha ‚Ä¢ Drogas",
        title:"Drogas: reduzir risco, reorganizar ambiente e construir consist√™ncia",
        desc:"Foco em ambiente, exposi√ß√£o, rotina e prote√ß√£o. Em casos graves, o ideal √© usar junto com apoio profissional.",
        p1:"Mapear ambientes, pessoas e situa√ß√µes de risco, identificar gatilhos emocionais e entender o ciclo emo√ß√£o ‚Üí uso ‚Üí consequ√™ncia.",
        p2:"Plano de prote√ß√£o pessoal, redu√ß√£o de exposi√ß√£o, estrat√©gia de sa√≠da e protocolo para impulso.",
        p3:"Organiza√ß√£o de rotina, a√ß√µes substitutas e responsabilidade com check-in.",
        p4:"Preven√ß√£o de reca√≠da, continuidade e refor√ßo de prote√ß√£o ambiental.",
        in7:"Mais clareza sobre ambientes de risco e a√ß√µes de prote√ß√£o imediata.",
        in30:"Mais estabilidade, menos exposi√ß√£o e mais chance de manter o controle.",
        day1Title:"Dia 1 ‚Äî Ambiente e risco (Drogas)",
        day1Text:"Liste 3 ambientes/pessoas de risco e 3 a√ß√µes de prote√ß√£o. Se houver risco √† sua seguran√ßa, procure ajuda profissional imediatamente."
      }
    };

    let currentV = "apostas";

    function applyTrilha(v){
      currentV = v;
      const d = DATA[v] || DATA.apostas;
      $("pillType").textContent = d.pill;
      $("trTitle").textContent = d.title;
      $("trDesc").textContent = d.desc;
      $("p1").textContent = d.p1;
      $("p2").textContent = d.p2;
      $("p3").textContent = d.p3;
      $("p4").textContent = d.p4;
      $("in7").textContent = d.in7;
      $("in30").textContent = d.in30;
      localStorage.setItem("rp30_selected", v);
      updateCheckinUI();
    }

    document.querySelectorAll(".choice[data-v]").forEach(el=>{
      const open = ()=> showTrilha(el.dataset.v, true);
      el.addEventListener("click", open);
      el.addEventListener("keydown", e=>{
        if(e.key === "Enter" || e.key === " "){
          e.preventDefault();
          open();
        }
      });
    });

    $("btnDay1").addEventListener("click", ()=>{
      const d = DATA[currentV] || DATA.apostas;
      alert(`${d.day1Title}\n\n${d.day1Text}\n\nExerc√≠cio: escreva 10 linhas e fa√ßa o check-in.`);
      document.getElementById("checkin").scrollIntoView({behavior:"smooth", block:"start"});
    });

    // Crisis sheet
    const overlay = $("overlay");
    const sheet = $("crisisSheet");
    const btnBottomCrisis = $("btnBottomCrisis");

    function openCrisis(){
      overlay.style.display = "block";
      sheet.classList.add("open");
      document.body.style.overflow = "hidden";
    }
    function closeCrisis(){
      sheet.classList.remove("open");
      overlay.style.display = "none";
      document.body.style.overflow = "";
      stopBreathing();
    }

    $("btnCrisisTop").addEventListener("click", openCrisis);
    $("btnCrisisTrilha").addEventListener("click", openCrisis);
    btnBottomCrisis.addEventListener("click", openCrisis);
    $("btnCloseSheet").addEventListener("click", closeCrisis);
    overlay.addEventListener("click", closeCrisis);
    document.addEventListener("keydown", (e)=>{ if(e.key === "Escape") closeCrisis(); });

    // Breathing
    let breathTimerInterval = null;
    let breathSeconds = 120;
    const breathBall = $("breathBall");

    function fmtTime(sec){
      const m = String(Math.floor(sec/60)).padStart(2,"0");
      const s = String(sec%60).padStart(2,"0");
      return `${m}:${s}`;
    }

    function stopBreathing(){
      if(breathTimerInterval){
        clearInterval(breathTimerInterval);
        breathTimerInterval = null;
      }
      breathBall.classList.remove("breathing");
    }

    function startBreathing(){
      stopBreathing();
      breathSeconds = 120;
      $("breathTimer").textContent = fmtTime(breathSeconds);
      $("breathHint").textContent = "Siga o ritmo visual.";
      breathBall.classList.add("breathing");

      breathTimerInterval = setInterval(()=>{
        breathSeconds--;
        $("breathTimer").textContent = fmtTime(Math.max(0, breathSeconds));
        if(breathSeconds <= 0){
          stopBreathing();
          $("breathTimer").textContent = "Feito ‚úÖ";
          $("breathHint").textContent = "Boa. Agora escolha uma a√ß√£o r√°pida.";
          toast("Boa. Voc√™ reduziu a urg√™ncia.");
        }
      }, 1000);
    }

    $("btnBreathStart").addEventListener("click", startBreathing);
    $("btnBreathStop").addEventListener("click", ()=>{
      stopBreathing();
      $("breathHint").textContent = "Pausado.";
      toast("Respira√ß√£o pausada.");
    });

    $("btnActionWater").addEventListener("click", ()=> toast("Beba √°gua agora e afaste-se do gatilho."));
    $("btnActionMove").addEventListener("click", ()=> toast("Mova o corpo por 1 minuto. S√≥ precisa vencer este momento."));
    $("btnActionCut").addEventListener("click", ()=> toast("Corta o gatilho e muda de ambiente por 5 minutos."));
    $("btnActionCheckin").addEventListener("click", ()=>{
      closeCrisis();
      if(viewTrilha.classList.contains("hidden")){
        showTrilha(localStorage.getItem("rp30_selected") || "apostas", true);
        setTimeout(()=> document.getElementById("checkin").scrollIntoView({behavior:"smooth", block:"start"}), 250);
      } else {
        document.getElementById("checkin").scrollIntoView({behavior:"smooth", block:"start"});
      }
      toast("Volta pro check-in. Um dia por vez.");
    });

    // Check-in local
    function key(){ return "rp30_checkins_" + currentV; }
    function loadCheckins(){
      try { return JSON.parse(localStorage.getItem(key()) || "[]"); }
      catch { return []; }
    }
    function saveCheckins(arr){
      localStorage.setItem(key(), JSON.stringify(arr));
    }
    function dateBR(iso){
      return new Date(iso).toLocaleDateString("pt-BR");
    }
    function getStreak(arr){
      let s = 0;
      for(let i = arr.length-1; i >= 0; i--){
        if(arr[i].did === "ok") s++;
        else break;
      }
      return s;
    }

    function updateCheckinUI(){
      const arr = loadCheckins();
      const last = arr.length ? arr[arr.length-1].date : null;
      const streak = getStreak(arr);

      $("last").textContent = last ? dateBR(last) : "‚Äî";
      $("streak").textContent = String(streak);

      const pct = Math.min(100, Math.round((Math.min(streak,30)/30)*100));
      $("progBar").style.width = pct + "%";

      if(streak >= 30) $("rewardText").textContent = "üèÜ 30 dias! Certificado e relat√≥rio liberados. Voc√™ venceu hoje, repetidas vezes.";
      else if(streak >= 14) $("rewardText").textContent = "üî• 14 dias! Badge ‚ÄúFortalecimento‚Äù desbloqueado.";
      else if(streak >= 7) $("rewardText").textContent = "‚úÖ 7 dias! Badge ‚ÄúPrimeira Semana‚Äù + certificado liberado.";
      else if(streak >= 3) $("rewardText").textContent = "‚úÖ 3 dias! Badge ‚ÄúIn√≠cio Forte‚Äù desbloqueado.";
      else $("rewardText").textContent = "Fa√ßa 7 dias seguidos sem cair e desbloqueie certificado + badge.";
    }

    $("btnCheckin").addEventListener("click", ()=>{
      const arr = loadCheckins();
      arr.push({
        date: new Date().toISOString(),
        did: $("ciDid").value,
        urge: Number($("ciUrge").value),
        trigger: $("ciTrig").value
      });
      saveCheckins(arr);
      updateCheckinUI();
      toast("Check-in salvo. Um dia por vez.");
    });

    $("btnReset").addEventListener("click", ()=>{
      localStorage.removeItem(key());
      updateCheckinUI();
      toast("Progresso zerado.");
    });

    $("btnBadges").addEventListener("click", ()=>{
      const streak = getStreak(loadCheckins());
      const badges = [];
      if(streak >= 3) badges.push("üèÖ In√≠cio Forte (3 dias)");
      if(streak >= 7) badges.push("üèÖ Primeira Semana (7 dias)");
      if(streak >= 14) badges.push("üèÖ Fortalecimento (14 dias)");
      if(streak >= 30) badges.push("üèÜ Reprograma 30 (30 dias)");
      alert(badges.length ? "Badges desbloqueados:\n\n" + badges.join("\n") : "Nenhum badge ainda. Fa√ßa 3 dias seguidos sem cair para desbloquear o primeiro.");
    });

    function downloadText(filename, content){
      const blob = new Blob([content], {type:"text/plain;charset=utf-8"});
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url; a.download = filename;
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    }

    $("btnCert").addEventListener("click", ()=>{
      const arr = loadCheckins();
      const streak = getStreak(arr);
      if(streak < 7){
        alert("Para gerar o certificado, desbloqueie 7 dias seguidos sem cair.");
        return;
      }
      const name = prompt("Nome/apelido para o certificado:", "An√¥nimo") || "An√¥nimo";
      const d = DATA[currentV] || DATA.apostas;
      const txt = `CERTIFICADO ‚Äî REPROGRAMA 30

Certificamos que ${name}
concluiu um marco de consist√™ncia na trilha ${d.pill.replace("Trilha ‚Ä¢ ","")},
alcan√ßando ${streak} dias de progresso registrado.

Mensagem:
"Voc√™ n√£o venceu para sempre.
Voc√™ venceu hoje.
E isso, repetido, muda uma vida."

Reprograma 30
Suporte educacional/comportamental
`;
      downloadText(`certificado-${currentV}-${name}.txt`, txt);
      toast("Certificado baixado.");
    });

    $("btnReport").addEventListener("click", ()=>{
      const arr = loadCheckins();
      if(!arr.length){
        alert("Fa√ßa pelo menos 1 check-in para gerar relat√≥rio.");
        return;
      }
      const last30 = arr.slice(-30);
      const avgUrge = (last30.reduce((s,x)=> s + (x.urge || 0), 0)/last30.length).toFixed(2);
      const trig = {};
      last30.forEach(x => trig[x.trigger] = (trig[x.trigger] || 0) + 1);
      const top = Object.entries(trig).sort((a,b)=> b[1]-a[1]).slice(0,3)
        .map(([k,v])=> `- ${k}: ${v}`).join("\n") || "- ‚Äî";
      const d = DATA[currentV] || DATA.apostas;
      const streak = getStreak(arr);

      const txt = `RELAT√ìRIO DE PROGRESSO ‚Äî REPROGRAMA 30

Trilha: ${d.pill.replace("Trilha ‚Ä¢ ","")}
Data de gera√ß√£o: ${new Date().toLocaleString("pt-BR")}

Resumo
- Streak atual: ${streak}
- Check-ins analisados: ${last30.length}
- Vontade m√©dia (0‚Äì5): ${avgUrge}

Gatilhos mais frequentes
${top}

Observa√ß√£o
Este relat√≥rio √© um apoio de acompanhamento pessoal e n√£o substitui avalia√ß√£o profissional.
`;
      downloadText(`relatorio-${currentV}.txt`, txt);
      toast("Relat√≥rio baixado.");
    });

    // Routing
    function initRoute(){
      const h = (location.hash || "").replace("#","").trim().toLowerCase();
      if(h && DATA[h]) showTrilha(h, false);
      else {
        viewHome.classList.remove("hidden");
        viewTrilha.classList.add("hidden");
        navLinksHome.classList.remove("hidden");
        navLinksTrilha.classList.add("hidden");
        history.replaceState({view:"home"}, "", "#");
        updateBottomCTA();
      }
    }

    window.addEventListener("popstate", (e)=>{
      if(e.state?.view === "trilha" && e.state?.v) showTrilha(e.state.v, false);
      else showHome(false);
    });

    initRoute();
    updateCheckinUI();
  </script>
</body>
</html>
